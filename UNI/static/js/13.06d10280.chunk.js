(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[13],{1708:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));n(314),n(1677);var r="_2kdvfw1",c="_2kdvfw3 _2kdvfw1 rgw6ez6m5 rgw6ez6kh rgw6ez4bt"},1915:function(e,t,n){},1917:function(e,t,n){},1918:function(e,t,n){},1919:function(e,t,n){},1920:function(e,t,n){},1969:function(e,t,n){"use strict";n.r(t);var r,c=n(5),s=n(27),a=n(4),i=n.n(a),o=n(17),l=n(10),u=n(2),b=n(68),j=n(140),d=n(18),g=n(3),f=n(31),O=n(116),h=n(143),p=n(9),x=n(72),m=n(112),w=n(287),v=n(702),z=n(172),N=n(1678),k=n(1),I=n(947),A=n(64),E=n(60),y=n(11),C=n(548),P=(n(314),n(487),n(1915),n(0)),T=u.default.div.withConfig({componentId:"sc-rcepl8-0"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;padding:12px 16px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),S=Object(u.default)(I.a).withConfig({componentId:"sc-rcepl8-1"})(["width:14px;margin-right:4px;color:",";"],(function(e){return e.theme.accentWarning})),R=Object(u.default)(y.r.BodyPrimary).withConfig({componentId:"sc-rcepl8-2"})(["align-items:center;color:",";display:flex;justify-content:center;margin:12px 0 !important;text-align:center;"],(function(e){return e.theme.accentWarning})),_=function(e){var t=e.disabled,n=e.children,r=e.onClick;return Object(P.jsx)(m.c,{as:"button",color:"explicitWhite",className:"m29kpj6 rgw6ezcb rgw6ezan rgw6ez6zt rgw6ez2kt rgw6ez24b rgw6ez4lt rgw6ez6tl rgw6ez6m5 rgw6ezcn rgw6ez6kl rgw6ez43b rgw6ez3pn",disabled:t,onClick:r,children:n})},L=function(e){var t=e.children;return t?Object(P.jsxs)(R,{fontSize:"14px",lineHeight:"20px",children:[Object(P.jsx)(S,{}),t]}):null},B=[z.d.FETCHING_ROUTE,z.d.CONFIRMING_IN_WALLET,z.d.FETCHING_FINAL_ROUTE,z.d.PROCESSING_TRANSACTION],G=function(e){var t=e.totalEthPrice,n=e.totalUsdPrice,r=e.bagStatus,s=e.fetchAssets,a=e.eventProperties,i=Object(A.r)(),o=Object(A.d)(E.a.WALLET),l=Object(d.useWeb3React)(),u=l.account,b=l.chainId,I=l.connector,S=Boolean(u&&b),R=Object(k.useCallback)((function(){S?S&&b!==p.e.MAINNET?Object(C.a)(I,p.e.MAINNET):s():i()}),[S,b,i,I,s]),G=Object(v.a)().balance,D=Object(k.useMemo)((function(){if(S&&b===p.e.MAINNET)return Object(j.parseEther)(G).gte(t)}),[S,b,G,t]),F=Object(k.useMemo)((function(){var e=Object(P.jsx)(g.b,{id:"Something went wrong"}),t=!0,n=null;return S&&b!==p.e.MAINNET?(e=Object(P.jsx)(g.b,{id:"Switch networks"}),t=!1,n=Object(P.jsx)(g.b,{id:"Wrong network"})):!1===D?(e=Object(P.jsx)(g.b,{id:"Pay"}),t=!0,n=Object(P.jsx)(g.b,{id:"Insufficient funds"})):r===z.d.WARNING?n=Object(P.jsx)(g.b,{id:"Something went wrong. Please try again."}):!S||o?(t=!1,e=Object(P.jsx)(g.b,{id:"Connect wallet"})):r===z.d.FETCHING_FINAL_ROUTE||r===z.d.CONFIRMING_IN_WALLET?(t=!0,e=Object(P.jsx)(g.b,{id:"Proceed in wallet"})):r===z.d.PROCESSING_TRANSACTION?(t=!0,e=Object(P.jsx)(g.b,{id:"Transaction pending"})):!0===D&&(t=!1,e=Object(P.jsx)(g.b,{id:"Pay"})),{buttonText:e,disabled:t,warningText:n}}),[r,b,S,D,o]),U=F.buttonText,W=F.disabled,M=F.warningText,H=B.includes(r)||o;return Object(P.jsx)(m.b,{className:"rgw6ez2a5 rgw6ez2fn rgw6ezvh",children:Object(P.jsxs)(T,{children:[Object(P.jsxs)(m.b,{gap:"4",paddingTop:"8",paddingBottom:"20",children:[Object(P.jsxs)(m.c,{justifyContent:"space-between",children:[Object(P.jsx)(x.b,{children:Object(P.jsx)(y.r.HeadlineSmall,{children:"Total"})}),Object(P.jsx)(x.b,{children:Object(P.jsxs)(y.r.HeadlineSmall,{children:[Object(N.n)(t.toString()),"\xa0ETH"]})})]}),Object(P.jsx)(m.c,{justifyContent:"flex-end",color:"textSecondary",className:w.c,children:"".concat(Object(N.f)(n,!0))})]}),Object(P.jsxs)(O.a,{events:[f.d.onClick],name:f.e.NFT_BUY_BAG_PAY,element:f.c.NFT_BUY_BAG_PAY_BUTTON,properties:Object(c.a)({},a),shouldLogImpression:S&&!W,children:[Object(P.jsx)(L,{children:M}),Object(P.jsxs)(_,{onClick:R,disabled:W,children:[H&&Object(P.jsx)(h.a,{size:"20px",stroke:"white"}),U]})]})]})})},D=n(45),F=n(1753),U=n(138),W=n(70),M=n(207),H=n(488),V=n(1682),Y=n(1763),q=n(1740),J=n(229),Q=n(339),X=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,c=e.title,s=void 0===c?void 0:c,a=e.rows,u=e.index,b=e.openIndex,j=e.isSuccessScreen,d=void 0!==j&&j,g=Object(k.useState)(!1),f=Object(l.a)(g,2),O=f[0],h=f[1],p=a.some((function(e){return e.status!==z.g.APPROVED})),v=Object(M.n)((function(e){return e.sellAssets})),N=Object(M.n)((function(e){return e.removeAssetMarketplace})),I=function(e){if(1===u){var t,n=Object(D.a)(v);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&N(r,e.marketplace)}}catch(c){n.e(c)}finally{n.f()}}else N(e.asset,e.marketplace)};function A(e){var t,n,r=e,c=r.asset.newListings;return null!==(t=null===c||void 0===c||null===(n=c.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(k.useEffect)((function(){h(u===b)}),[u,b]);var E=!p&&a.length>0&&!d;return Object(P.jsxs)(m.c,{flexWrap:"wrap",className:w.n,marginTop:"10",marginBottom:"10",onClick:function(){return a.length>0&&h(!O)},color:E?"green":"textPrimary",children:[E&&Object(P.jsx)(U.e,{style:{marginRight:"8px"}}),t,!d&&Object(P.jsx)(U.r,{className:Object(J.default)("".concat(O?"":q.c," ").concat(q.b))}),(O||d)&&Object(P.jsxs)(m.b,{gap:"12",width:"full",paddingTop:d?"28":"auto",className:Object(J.default)(!d&&q.e),children:[r&&Object(P.jsx)(x.b,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),s&&Object(P.jsx)(x.b,{color:"textSecondary",className:w.a,children:s}),Object(P.jsx)(m.b,{gap:"8",children:a.map((function(e,t){var n;return Object(P.jsxs)(m.b,{gap:"8",children:[Object(P.jsxs)(m.c,{children:[e.images.map((function(t,n){return Object(P.jsx)(x.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:q.d,src:t,alt:e.name},n)})),Object(P.jsx)(x.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",maxWidth:{sm:"max",md:e.status===z.g.REJECTED||e.status===z.g.FAILED?"120":"full"},className:w.c,children:e.name}),d?A(e)&&"".concat(Object(Q.c)(Object(Q.g)(null!==(n=A(e))&&void 0!==n?n:0).toString())," ETH"):e.status===z.g.APPROVED?Object(P.jsx)(U.e,{height:"20",width:"20"}):e.status===z.g.FAILED||e.status===z.g.REJECTED?Object(P.jsxs)(m.c,{gap:"4",children:[Object(P.jsx)(x.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(P.jsx)(U.C,{})]}):e.status===z.g.SIGNING&&Object(P.jsx)(U.N,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===z.g.FAILED||e.status===z.g.REJECTED)&&Object(P.jsxs)(m.c,{gap:"8",justifyContent:"center",children:[Object(P.jsx)(x.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),I(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(P.jsx)(x.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"genieBlue",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},K=n(1741),Z=function(){var e=Object(d.useWeb3React)().provider,t=Object(M.n)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),r=Object(M.k)((function(e){return e.listings})),c=Object(M.k)((function(e){return e.setListings})),s=Object(M.k)((function(e){return e.collectionsRequiringApproval})),a=Object(M.k)((function(e){return e.setCollectionsRequiringApproval})),u=Object(k.useState)(0),b=Object(l.a)(u,2),j=b[0],g=b[1],f=Object(M.k)((function(e){return e.listingStatus})),O=Object(M.k)((function(e){return e.setListingStatus})),h=Object(k.useState)(!1),p=Object(l.a)(h,2),v=p[0],N=p[1],I=Object(M.k)((function(e){return e.looksRareNonce})),A=Object(M.k)((function(e){return e.setLooksRareNonce})),E=Object(M.k)((function(e){return e.getLooksRareNonce})),y=Object(M.e)((function(e){return e.toggleBag})),C=Object(k.useRef)(I),T=Object(M.i)();Object(k.useEffect)((function(){M.k.subscribe((function(e){return C.current=e.looksRareNonce}))}),[]);var S=Object(k.useMemo)((function(){return Object(K.d)(t)}),[t]);Object(k.useEffect)((function(){(null===s||void 0===s?void 0:s.length)&&N(s.every((function(e){return e.status===z.g.APPROVED}))),!v||f!==z.g.PENDING&&f!==z.g.CONTINUE||_()}),[s,v]);var R=function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,c,o,l,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return O(z.g.SIGNING),t=F.b[F.a.MAINNET],e.next=6,n.getAddress();case 6:return r=e.sent,e.next=9,Object(H.p)(r);case 9:c=e.sent,A(null!==c&&void 0!==c?c:0),(null===s||void 0===s?void 0:s.some((function(e){return e.status===z.g.PAUSED})))||(O(z.g.SIGNING),g(1)),o=t.TRANSFER_MANAGER_ERC721,l=Object(D.a)(s);try{for(l.s();!(u=l.n()).done;)b=u.value,Object(K.h)(b.status)&&Object(K.a)(b,s,a,n,o,L)}catch(i){l.e(i)}finally{l.f()}case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var t=Object(o.a)(i.a.mark((function t(){var s,a,o,l,u,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:O(z.g.SIGNING),g(2),a=Object(D.a)(r),t.prev=5,a.s();case 7:if((o=a.n()).done){t.next=15;break}if(l=o.value,t.t0=Object(K.h)(l.status),!t.t0){t.next=13;break}return t.next=13,Object(K.g)(l,r,c,n,e,E,A,L);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),a.e(t.t1);case 20:return t.prev=20,a.f(),t.finish(20);case 23:return u=r.every((function(e){return e.status===z.g.APPROVED})),b=r.some((function(e){return e.status===z.g.PAUSED})),u?(g(0),O(z.g.APPROVED)):b||O(z.g.FAILED),t.t2=H.o,t.t3=r,t.next=30,null===n||void 0===n?void 0:n.getAddress();case 30:if(t.t5=s=t.sent,t.t4=null!==t.t5,!t.t4){t.next=34;break}t.t4=void 0!==s;case 34:if(!t.t4){t.next=38;break}t.t6=s,t.next=39;break;case 38:t.t6="";case 39:return t.t7=t.t6,t.next=42,(0,t.t2)(t.t3,t.t7);case 42:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var e,t=Object(D.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(K.e)(n,s,a)}}catch(u){t.e(u)}finally{t.f()}var i,o=Object(D.a)(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;Object(K.e)(l,r,c)}}catch(u){o.e(u)}finally{o.f()}},B=Object(k.useMemo)((function(){return f===z.g.APPROVED}),[f]);return Object(P.jsxs)(m.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(P.jsxs)(m.c,{className:w.k,marginBottom:"10",children:[T&&!B&&Object(P.jsx)(x.b,{paddingTop:"4",marginRight:"4",onClick:y,children:Object(P.jsx)(U.p,{height:28,width:28})}),B?"Success!":"Listing ".concat(t.length," NFTs"),Object(P.jsx)(x.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:y,children:Object(P.jsx)(U.pb,{height:28,width:28,fill:W.c.colors.textPrimary})})]}),Object(P.jsx)(m.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:B?Object(P.jsx)(X,{sectionTitle:"Listed ".concat(r.length," item").concat(Object(V.a)(r.length)," for sale"),rows:r,index:0,openIndex:j,isSuccessScreen:!0}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(X,{sectionTitle:"Approve ".concat(s.length," collection").concat(Object(V.a)(s.length)),title:"COLLECTIONS",rows:s,index:1,openIndex:j}),Object(P.jsx)(X,{sectionTitle:"Confirm ".concat(r.length," listing").concat(Object(V.a)(r.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:r,index:2,openIndex:j})]})}),Object(P.jsx)("hr",{className:q.f}),Object(P.jsxs)(m.c,{className:w.n,marginTop:"12",marginBottom:B?"8":"20",children:["Return if sold",Object(P.jsxs)(m.c,{className:w.o,marginLeft:"auto",marginRight:"0",children:[S,"\xa0ETH"]})]}),B?Object(P.jsxs)(x.b,{as:"span",className:w.g,color:"textSecondary",children:["Status:"," ",Object(P.jsx)(x.b,{as:"span",color:"green200",children:"Confirmed"})]}):Object(P.jsx)(Y.a,{onClick:function(){!function(){var e,t=Object(D.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(K.f)(n,s,a)}}catch(u){t.e(u)}finally{t.f()}var i,o=Object(D.a)(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;Object(K.f)(l,r,c)}}catch(u){o.e(u)}finally{o.f()}}(),v?_():R()},buttonText:"Start listing",showWarningOverride:T}),(f===z.g.PENDING||f===z.g.SIGNING)&&Object(P.jsx)(x.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:q.a,onClick:function(){L()},type:"button",children:"Stop listing"})]})},$=n(530),ee=n(1774),te=n(880),ne=n(316),re=n(97),ce=(n(1917),n(81)),se=n(115),ae=n(38),ie=n(36),oe=Object(u.keyframes)(r||(r=Object(ie.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),le=u.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],oe,oe,(function(e){return e.theme.accentActive})),ue=function(){return Object(P.jsx)(x.b,{display:"flex",position:"absolute",children:Object(P.jsx)("svg",{height:"18px",width:"18px",children:Object(P.jsx)(le,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},be=n(1708),je=n(54),de=(n(1918),"rgw6ez12b rgw6ez18z rgw6ez6lx"),ge="_1kuawcf",fe="rgw6ezcb rgw6ezah rgw6ez6zp rgw6ez6wp rgw6ez41b rgw6ez41h rgw6ez49t",Oe=Object(u.default)(ae.n).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),he=function(){return Object(P.jsx)(x.b,{position:"relative",background:"loadingBackground",className:de,children:Object(P.jsxs)(x.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"grey500",fontSize:"12",fontWeight:"normal",children:["Image",Object(P.jsx)("br",{}),"not",Object(P.jsx)("br",{}),"available"]})})},pe=function(e){var t=e.asset,n=e.usdPrice,r=e.removeAsset,c=e.showRemove,s=e.grayscale,a=e.isMobile,i=Object(k.useState)(!1),o=Object(l.a)(i,2),u=o[0],b=o[1],d=Object(k.useState)(!t.smallImageUrl),g=Object(l.a)(d,2),f=g[0],O=g[1],h=Object(k.useState)(!1),p=Object(l.a)(h,2),w=p[0],v=p[1],z=Object(k.useCallback)((function(){return v(!0)}),[]),I=Object(k.useCallback)((function(){return v(!1)}),[]),A=Boolean(c&&w&&!a),E=t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice,y=Object(N.n)(E),C=Object(N.f)(n?parseFloat(Object(j.formatEther)(E))*n:n,!0),T=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),r([t])}),[t,r]);return Object(P.jsx)(je.b,{to:Object(N.o)(t),style:{textDecoration:"none"},children:Object(P.jsxs)(m.c,{className:"_1kuawc1 rgw6ez29t rgw6ez2fb rgw6ez2kh rgw6ez23z rgw6ez49n rgw6ez3pb rgw6ez6kl rgw6ez1bb rgw6ez6m5",onMouseEnter:z,onMouseLeave:I,children:[Object(P.jsxs)(x.b,{position:"relative",display:"flex",children:[Object(P.jsx)(x.b,{display:c&&a?"block":"none",className:"rgw6ez44b rgw6ez365 rgw6ez3bn",onClick:T,transition:"250",zIndex:"1",children:Object(P.jsx)(U.s,{})}),!f&&Object(P.jsx)(x.b,{as:"img",src:t.smallImageUrl,alt:t.name,className:Object(J.default)(de,s&&!w&&ge),onLoad:function(){b(!0)},onError:function(){O(!0)},visibility:u?"visible":"hidden"}),!u&&Object(P.jsx)(x.b,{position:"absolute",className:"".concat(de," ").concat(be.b)}),f&&Object(P.jsx)(he,{})]}),Object(P.jsxs)(m.b,{overflow:"hidden",width:"full",color:s?"textSecondary":"textPrimary",children:[Object(P.jsx)(m.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(P.jsx)(x.b,{className:"_1kuawcl rgw6ezan rgw6ezch rgw6ez6wp rgw6ez41h rgw6ez41b",children:t.name||t.tokenId})}),Object(P.jsxs)(m.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(P.jsx)(x.b,{className:fe,children:t.collectionName}),t.collectionIsVerified&&Object(P.jsx)(U.ob,{className:"rgw6ez3tn"})]})]}),A&&Object(P.jsx)(Oe,{onClick:T,children:"Remove"}),(!A||a)&&Object(P.jsxs)(m.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(P.jsxs)(x.b,{className:"_1kuawcj rgw6ez3on rgw6ezan rgw6ezcn rgw6ez3tn",children:[y,"\xa0ETH"]}),Object(P.jsx)(x.b,{className:fe,children:C})]})]})})},xe=function(e){var t,n=e.asset,r=e.usdPrice,c=e.markAssetAsReviewed,s=e.top,a=e.isMobile,i=b.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(b.a.from(n.priceInfo.ETHPrice));return Object(P.jsxs)(m.b,{className:"rgw6ez2l5 rgw6ez24n rgw6ezjh rgw6ezoz rgw6ez4lh rgw6ez3oz rgw6ez49n rgw6ez6kx rgw6ez6ud rgw6ez4ut rgw6ez5at rgw6ez1bb rgw6ez6kl",borderTopColor:s?"backgroundOutline":"transparent",children:[Object(P.jsxs)(m.c,{className:"rgw6ezcb rgw6ezah rgw6ez6zp rgw6ez47t rgw6ez3on",children:[i?Object(P.jsx)(U.gb,{}):Object(P.jsx)(U.fb,{}),Object(P.jsx)(x.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(N.n)(n.priceInfo.ETHPrice)," ETH")})]}),Object(P.jsx)(x.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(P.jsx)(pe,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:a})}),Object(P.jsxs)(m.c,{gap:"12",justifyContent:"space-between",children:[Object(P.jsx)(x.b,{className:"_1kuawcd _1kuawc9 rgw6ezcb rgw6ezah rgw6ez6zp rgw6ez2kh rgw6ez23z rgw6ez14n rgw6ez47n rgw6ezcn rgw6ez41z rgw6ez6m5 rgw6ez5th",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(n,!1)},children:"Remove"}),Object(P.jsx)(x.b,{className:"_1kuawcb _1kuawc9 rgw6ezcb rgw6ezah rgw6ez6zp rgw6ez2kh rgw6ez23z rgw6ez14n rgw6ez47n rgw6ezcn rgw6ez41z rgw6ez6m5 rgw6ez5xb",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(n,!0)},children:"Keep"})]})]})},me=function(e){var t=e.assets;return Object(P.jsx)(m.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(P.jsx)(x.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:ge},"".concat(e.address,"-").concat(e.tokenId))}))})},we=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,c=e.didOpenUnavailableAssets,s=e.setDidOpenUnavailableAssets,a=e.isMobile,i=Object(k.useReducer)((function(e){return!e}),!1),o=Object(l.a)(i,2),u=o[0],b=o[1],j=Object(k.useState)(8),d=Object(l.a)(j,2),g=d[0],f=d[1];return Object(k.useEffect)((function(){if(g){var e=setInterval((function(){f(g-1)}),1e3);return function(){return clearInterval(e)}}c||(r(),s(!1))}),[g,r,c,s]),t&&0!==t.length?Object(P.jsxs)(m.b,{className:"rgw6ez2l5 rgw6ez24n rgw6ezjh rgw6ezoz rgw6ez4lh rgw6ez3pb rgw6ez49n rgw6ez6kx rgw6ez6ud rgw6ez4ut rgw6ez5kb rgw6ez5at rgw6ez1bb",children:[1===t.length&&Object(P.jsx)(pe,{asset:t[0],usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a}),t.length>1&&Object(P.jsxs)(m.b,{children:[Object(P.jsxs)(m.c,{justifyContent:"space-between",marginBottom:u?"12":"0",cursor:"pointer",onClick:function(){!c&&s(!0),b()},children:[Object(P.jsxs)(m.c,{gap:"12",color:"textPrimary",className:w.c,children:[!u&&Object(P.jsx)(me,{assets:t.slice(0,5)}),"No longer available"]}),Object(P.jsx)(m.c,{color:"textSecondary",children:u?Object(P.jsx)(U.q,{}):Object(P.jsx)(U.o,{})}),!c&&Object(P.jsxs)(m.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:r,children:[Object(P.jsx)(ue,{}),Object(P.jsx)(U.u,{})]})]}),Object(P.jsx)(m.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:u&&t.map((function(e){return Object(P.jsx)(pe,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})]}):null},ve=n(1724),ze=n(1689),Ne=n(1703),ke=function(){var e=Object(M.e)((function(e){return e.bagStatus})),t=Object(M.e)((function(e){return e.setBagStatus})),n=Object(M.e)((function(e){return e.markAssetAsReviewed})),r=Object(M.e)((function(e){return e.didOpenUnavailableAssets})),s=Object(M.e)((function(e){return e.setDidOpenUnavailableAssets})),a=Object(M.e)((function(e){return e.itemsInBag})),i=Object(M.e)((function(e){return e.setItemsInBag})),o=Object(M.e)((function(e){return e.removeAssetsFromBag})),l=Object(M.i)(),u=Object(k.useMemo)((function(){return Object(ve.b)(a)}),[a]),b=Object(ne.useQuery)(["fetchPrice",{}],(function(){return Object(ze.a)()}),{}).data,j=Object(k.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===z.c.ADDED_TO_BAG||e.status===z.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===z.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===z.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==z.c.UNAVAILABLE}))}}),[u]),d=j.unchangedAssets,g=j.priceChangedAssets,O=j.unavailableAssets,h=j.availableItems;return Object(k.useEffect)((function(){var n=g.length>0,r=u.length>0;n&&Object(ce.b)(f.e.NFT_BUY_BAG_CHANGED,Object(c.a)({usd_value:b,bag_quantity:u},Object(Ne.a)(g))),e!==z.d.IN_REVIEW||n||t(r?z.d.CONFIRM_REVIEW:z.d.ADDING_TO_BAG)}),[e,u,g,t,b]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(m.b,{display:g.length>0||O.length>0?"flex":"none",children:[O.length>0&&Object(P.jsx)(se.a,{name:f.e.NFT_BUY_BAG_CHANGED,properties:Object(c.a)({usd_value:b,bag_quantity:u},Object(Ne.a)(O)),shouldLogImpression:!0,children:Object(P.jsx)(we,{assets:O,usdPrice:b,clearUnavailableAssets:function(){return i(h)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:s,isMobile:l})}),g.map((function(e,t){return Object(P.jsx)(xe,{asset:e,usdPrice:b,markAssetAsReviewed:n,top:0===t&&0===O.length,isMobile:l},e.id)}))]}),Object(P.jsx)(m.b,{gap:"8",children:d.slice(0).reverse().map((function(e){return Object(P.jsx)(pe,{asset:e,usdPrice:b,removeAsset:o,showRemove:!0,isMobile:l},e.id)}))})]})},Ie=(n(1919),Object(u.default)(y.b).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;transition:150ms ease color;:hover{color:",";}"],(function(e){return e.theme.textSecondary}),(function(e){return e.theme.accentActive}))),Ae=u.default.div.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;display:flex;flex-direction:row;justify-content:space-between;"]),Ee=u.default.button.withConfig({componentId:"sc-bq6y8h-2"})(["background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;padding:2px;opacity:1;transition:125ms ease opacity;:hover{opacity:0.6;}:active{opacity:0.4;}"],(function(e){return e.theme.textPrimary})),ye=function(e){var t=e.numberOfAssets,n=e.closeBag,r=e.resetFlow,c=e.isProfilePage;return Object(P.jsxs)(m.b,{gap:"4",paddingX:"32",marginBottom:"20",children:[Object(P.jsxs)(m.c,{className:"tk1lnr1 rgw6ezcb rgw6ezat rgw6ez6zx rgw6ez49n rgw6ez445",children:[Object(P.jsx)(y.r.HeadlineSmall,{children:c?"Sell NFTs":"My bag"}),Object(P.jsx)(Ee,{onClick:n,children:Object(P.jsx)(U.j,{})})]}),t>0&&Object(P.jsxs)(Ae,{children:[Object(P.jsx)(y.r.BodyPrimary,{children:Object(V.b)(t,"NFT")}),Object(P.jsx)(Ie,{onClick:r,children:"Clear all"})]})]})},Ce=Object(u.default)(m.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:",";margin-top:36;display:",";justify-content:",";height:",";"],(function(e){return!e.isProfilePage&&"12"}),(function(e){return e.isProfilePage&&"flex"}),(function(e){return e.isProfilePage&&"center"}),(function(e){return e.isProfilePage&&"inherit"})),Pe=function(){var e=Object(re.f)().pathname.startsWith("/nfts/profile");return Object(P.jsxs)(Ce,{isProfilePage:e,children:[Object(P.jsx)(m.a,{children:e?Object(P.jsx)(U.L,{color:W.c.colors.textTertiary}):Object(P.jsx)(U.K,{color:W.c.colors.textTertiary})}),e?Object(P.jsx)(m.a,{className:w.n,children:"No NFTs selected"}):Object(P.jsxs)(m.b,{gap:"16",children:[Object(P.jsx)(m.a,{className:w.n,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(P.jsx)(m.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},Te=(n(1920),function(e){var t,n,r=e.asset,c=Object(M.n)((function(e){return e.removeSellAsset})),s=Object(M.i)(),a=Object(k.useState)(!1),i=Object(l.a)(a,2),o=i[0],u=i[1],b=function(){return u(!o)};return Object(P.jsxs)(m.c,{paddingY:"8",position:"relative",onMouseEnter:b,onMouseLeave:b,children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(x.b,{display:s?"flex":"none",className:"ybdtja3 rgw6ez44b rgw6ez6kl",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(r)},children:Object(P.jsx)("img",{className:"rgw6ez10z",src:"/nft/svgs/minusCircle.svg",alt:"Remove item"})}),Object(P.jsx)("img",{className:"rgw6ezjt rgw6ezpb rgw6ez6lx rgw6ez18z rgw6ez12b",src:r.image_url,alt:r.name})]}),Object(P.jsxs)(m.b,{gap:"4",overflow:"hidden",flexWrap:"nowrap",children:[Object(P.jsx)(x.b,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",className:w.n,children:null!==(t=r.name)&&void 0!==t?t:"#".concat(r.tokenId)}),Object(P.jsx)(x.b,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",className:w.c,children:null===(n=r.collection)||void 0===n?void 0:n.name})]}),o&&!s&&Object(P.jsx)(x.b,{marginLeft:"auto",marginRight:"0",className:"rgw6ezcn rgw6ezah rgw6ez6zl rgw6ez29z rgw6ez2fh rgw6ez2kt rgw6ez24b rgw6ez4hz rgw6ez49n rgw6ez6m5 rgw6ez6kl",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(r)},children:"Remove"})]})}),Se=function(){var e=Object(M.n)((function(e){return e.sellAssets}));return Object(P.jsx)(m.b,{children:e.length?e.map((function(e,t){return Object(P.jsx)(Te,{asset:e},t)})):null})},Re=u.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;background:rgba(0,0,0,0.7);backdrop-filter:blur(12px);top:72px;width:100%;height:100%;"]),_e=function(e){var t=e.top,n=e.show;return Object(P.jsx)(x.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(d.useWeb3React)(),t=e.account,n=e.provider,r=Object(M.e)((function(e){return e.bagStatus})),a=Object(M.e)((function(e){return e.setBagStatus})),u=Object(M.e)((function(e){return e.didOpenUnavailableAssets})),g=Object(M.e)((function(e){return e.setDidOpenUnavailableAssets})),f=Object(M.e)((function(e){return e.isLocked})),O=Object(M.e)((function(e){return e.setLocked})),h=Object(M.e)((function(e){return e.reset})),p=Object(M.n)((function(e){return e.reset})),v=Object(M.n)((function(e){return e.sellAssets})),I=Object(M.l)((function(e){return e.setProfilePageState})),A=Object(M.l)((function(e){return e.state})),E=Object(M.e)((function(e){return e.itemsInBag})),y=Object(M.e)((function(e){return e.setItemsInBag})),C=Object(M.e)((function(e){return e.bagExpanded})),T=Object(M.e)((function(e){return e.toggleBag})),S=Object(M.e)((function(e){return e.setTotalEthPrice})),R=Object(M.e)((function(e){return e.setTotalUsdPrice})),_=Object(M.e)((function(e){return e.setBagExpanded})),L=Object(re.f)().pathname,B=L.startsWith("/nfts/profile"),D=L.startsWith("/nfts"),F=Object(M.i)(),U=L.includes("/nfts/asset/"),W=Object(M.o)((function(e){return e.sendTransaction})),V=Object(M.o)((function(e){return e.state})),Y=Object(M.o)((function(e){return e.setState})),q=Object(k.useRef)(V),J=Object(M.p)((function(e){return[e.setTransactionResponse]})),Q=Object(l.a)(J,1)[0],X=Object(ne.useQueryClient)(),K=Object(k.useMemo)((function(){return Object(N.x)(E)}),[E]),ce=Object(k.useState)(!1),se=Object(l.a)(ce,2),ae=se[0],ie=se[1],oe=Object(k.useState)(!1),le=Object(l.a)(oe,2),ue=le[0],be=le[1],je=Object(k.useState)(0),de=Object(l.a)(je,2),ge=de[0],fe=de[1],Oe=Object(ne.useQuery)(["fetchPrice",{}],(function(){return Object(N.h)()}),{}).data,he=Object(k.useMemo)((function(){var e=K.reduce((function(e,t){return t.status!==z.c.UNAVAILABLE?e.add(b.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),b.a.from(0));return{totalEthPrice:e,totalUsdPrice:Oe?parseFloat(Object(j.formatEther)(e))*Oe:void 0}}),[K,Oe]),pe=he.totalEthPrice,xe=he.totalUsdPrice,me=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W(null===n||void 0===n?void 0:n.getSigner(),K.filter((function(e){return e.status!==z.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(r=e.sent)||q.current!==z.m.Success&&q.current!==z.m.Failed||(O(!1),ie(!1),Q(r),_({bagExpanded:!1}),h());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=Object(k.useCallback)((function(){return _({bagExpanded:!1,manualClose:!0})}),[_]),ve=function(){var e=Object(o.a)(i.a.mark((function e(){var n,r,c,o,l,j,d,h,p,x,m,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K.filter((function(e){return e.status!==z.c.UNAVAILABLE})).map((function(e){return e.asset})),r=Object(N.a)(n.reduce((function(e,t){return e.add(b.a.from(t.priceInfo.ETHPrice))}),b.a.from(0)).toString()),u&&g(!1),!f&&O(!0),a(z.d.FETCHING_ROUTE),e.prev=5,e.next=8,X.fetchQuery(["assetsRoute",r,n,t],(function(){return Object(H.i)({toSell:[r],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 8:c=e.sent,o=Object(te.a)(n,c.route),l=o.filter((function(e){return e.updatedPriceInfo})).sort(N.A),j=o.filter((function(e){return e.isUnavailable})),d=o.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),h=d.length>0,p=l.length>0,x=j.length>0,m=h||p||x,w=p||x,y([].concat(Object(s.a)(j.map((function(e){return{asset:e,status:z.c.UNAVAILABLE}}))),Object(s.a)(l.map((function(e){return{asset:e,status:z.c.REVIEWING_PRICE_CHANGE}}))),Object(s.a)(d.map((function(e){return{asset:e,status:z.c.REVIEWED}}))))),O(!1),m?w?a(p?z.d.IN_REVIEW:z.d.CONFIRM_REVIEW):(me(c),a(z.d.CONFIRMING_IN_WALLET)):a(z.d.ADDING_TO_BAG),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),a(z.d.ADDING_TO_BAG);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();Object(k.useEffect)((function(){M.o.subscribe((function(e){return q.current=e.state}))}),[]),Object(k.useEffect)((function(){f&&!ae&&ie(!0)}),[f,ae]),Object(k.useEffect)((function(){_({bagExpanded:!1})}),[L]),Object(k.useEffect)((function(){q.current===z.m.Confirming&&a(z.d.PROCESSING_TRANSACTION),q.current!==z.m.Denied&&q.current!==z.m.Invalid||(q.current===z.m.Invalid?a(z.d.WARNING):a(z.d.CONFIRM_REVIEW),Y(z.m.New),O(!1),ie(!1))}),[q.current]),Object(k.useEffect)((function(){S(pe),R(xe)}),[pe,xe,S,R]);var ze=K.length>0,Ne=K.length>0,Ie=v.length>0,Ae=Boolean(!B&&!Ne&&r===z.d.ADDING_TO_BAG||B&&!Ie);return Object(P.jsx)(P.Fragment,{children:C&&D?Object(P.jsxs)($.a,{children:[Object(P.jsx)(m.b,{zIndex:F||ae?"modal":"3",className:"_1jcz50r1 rgw6ez44h rgw6ez3b5 rgw6ez3f0 rgw6ez14n rgw6ez1bb rgw6ez35n rgw6ez4ih rgw6ez6l5 rgw6ez4rt rgw6ez6ud rgw6ez49n rgw6ez2lh rgw6ez255",children:B&&A===z.j.LISTING?Object(P.jsx)(Z,{}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ye,{numberOfAssets:B?v.length:K.length,closeBag:we,resetFlow:B?p:h,isProfilePage:B}),Ae&&Object(P.jsx)(Pe,{}),Object(P.jsx)(_e,{top:!0,show:ue&&ge>0}),Object(P.jsx)(m.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==ue&&be(t)}},className:"_1jcz50r3 rgw6ez2a5 rgw6ez2fn rgw6ez1vb rgw6ez6y1",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;fe(t?(t+n)/r*100:0)},gap:"12",children:B?Object(P.jsx)(Se,{}):Object(P.jsx)(ke,{})}),Object(P.jsx)(_e,{show:ue&&ge<100}),ze&&!B&&Object(P.jsx)(G,{totalEthPrice:pe,totalUsdPrice:xe,bagStatus:r,fetchAssets:ve,eventProperties:Object(c.a)({usd_value:xe},Object(N.i)(K.map((function(e){return e.asset}))))}),Ie&&B&&Object(P.jsx)(x.b,{marginTop:"32",marginX:"28",paddingY:"10",className:"".concat(w.e," ").concat(w.h),backgroundColor:"accentAction",textAlign:"center",onClick:function(){F&&T(),I(z.j.LISTING)},children:"Continue"})]})}),U?Object(P.jsx)(Re,{onClick:T}):ae&&Object(P.jsx)(ee.a,{onClick:function(){return f?void 0:ie(!1)}})]}):null})}}}]);
//# sourceMappingURL=13.06d10280.chunk.js.map