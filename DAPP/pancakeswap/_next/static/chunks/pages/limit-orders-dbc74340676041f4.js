(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4576],{84120:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit-orders",function(){return t(8947)}])},39853:function(e,n,t){"use strict";t.d(n,{Td:function(){return a},Th:function(){return u}});var r=t(7297),i=t(87379),o=t(57247);function c(){var e=(0,r.Z)(["\n  border-bottom: 1px solid ",";\n  color: ",";\n  padding: 16px;\n  vertical-align: middle;\n\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,r.Z)(["\n  color: ",";\n  font-size: 12px;\n  text-transform: uppercase;\n"]);return s=function(){return e},e}var a=i.ZP.td.withConfig({componentId:"sc-ea0e7240-0"}).withConfig({componentId:"sc-a0ae180c-0"})(c(),function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text},o.cp),u=(0,i.ZP)(a).attrs({as:"th"}).withConfig({componentId:"sc-ea0e7240-1"}).withConfig({componentId:"sc-a0ae180c-1"})(s(),function(e){return e.theme.colors.secondary})},44391:function(e,n,t){"use strict";var r=t(7297),i=t(87379),o=t(57247),c=t(39853);function s(){var e=(0,r.Z)(["\n  max-width: 100%;\n  width: 100%;\n\n  tbody tr:last-child {\n    "," {\n      border-bottom: 0;\n    }\n  }\n\n  ","\n"]);return s=function(){return e},e}var a=i.ZP.table.withConfig({componentId:"sc-4fe367f7-0"}).withConfig({componentId:"sc-b0f07fdc-0"})(s(),c.Td,o.Dh);n.Z=a},8008:function(e,n,t){"use strict";var r=t(26042),i=t(69396),o=t(7297),c=t(85893),s=t(67294),a=t(15426),u=t(69589),l=t(44147),d=t(62077),x=t(75943),h=t(92052),p=t(98553),m=t(52775),f=t(87379);function j(){var e=(0,o.Z)(["\n  background: ",";\n  padding-bottom: 24px;\n  padding-top: 24px;\n"]);return j=function(){return e},e}var g=(0,f.ZP)(a.xB).withConfig({componentId:"sc-62a59ff0-0"})(j(),function(e){return e.theme.colors.gradientBubblegum}),v=function(e){var n=e.id,t=e.onSuccess,o=e.onDismiss,f=e.checks,j=e.header,v=e.subtitle,b=(0,s.useState)(f||[]),Z=b[0],y=b[1],C=(0,m.$G)().t,T=(0,s.useCallback)(function(e){y(Z.map(function(n){return e===n.key?(0,i.Z)((0,r.Z)({},n),{value:!n.value}):n}))},[Z]),w=(0,s.useCallback)(function(){t(),o()},[t,o]);return(0,c.jsxs)(a.F0,{title:C("Welcome!"),$minWidth:"320px",id:n,children:[(0,c.jsx)(g,{children:(0,c.jsx)(a.r6,{children:(0,c.jsx)(u.Z,{scale:"lg",children:C("Welcome!")})})}),(0,c.jsxs)(a.fe,{p:"24px",maxWidth:["100%","100%","100%","400px"],children:[(0,c.jsxs)(l.Z,{maxHeight:"300px",overflowY:"auto",children:[(0,c.jsx)(u.Z,{as:"h3",mb:"24px",children:j}),v&&(0,c.jsx)(d.Z,{as:"p",color:"textSubtle",mb:"24px",children:v}),Z.map(function(e){return(0,c.jsx)("label",{htmlFor:e.key,style:{display:"block",cursor:"pointer",marginBottom:"24px"},children:(0,c.jsxs)(x.Z,{alignItems:"center",children:[(0,c.jsx)("div",{style:{flex:"none",alignSelf:"flex-start",paddingTop:"8px"},children:(0,c.jsx)(h.Z,{id:e.key,scale:"sm",checked:e.value,onChange:function(){return T(e.key)}})}),(0,c.jsx)(d.Z,{ml:"8px",children:e.content})]})},e.key)})]}),(0,c.jsx)(p.Z,{id:"".concat(n,"-continue"),width:"100%",onClick:w,disabled:Z.some(function(e){return!e.value}),children:C("Continue")})]})]})};n.Z=v},22344:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r,i,o,c,s=t(26042),a=t(10253),u=t(7297),l=t(85893),d=t(97478),x=t(52775),h=t(87379),p=t(20353),m=t(75943),f=t(44147),j=t(88896),g=t(62077),v=t(95459),b=t(921),Z=t(47568),y=t(70655),C=t(67294),T=t(28687),w=t(62621),k=t(6680),S=t(33533);function P(){var e=(0,u.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                synced\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return P=function(){return e},e}(A=r||(r={}))[A.OK=0]="OK",A[A.WARNING=1]="WARNING",A[A.NOT_OK=2]="NOT_OK",A[A.UNKNOWN=3]="UNKNOWN";var I=function(e){var n=(0,C.useState)({status:r.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),t=n[0],i=n[1];return(0,S.X)(function(n){var t;(t=(0,Z.Z)(function(){var t,o,c,s,u,l,d,x,h;return(0,y.__generator)(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,Promise.all([(0,T.request)(k.AM,(0,T.gql)(P(),e)),n?Promise.resolve(n):w.v.getBlockNumber()])];case 1:return o=(t=a.Z.apply(void 0,[p.sent(),2]))[0].indexingStatusForCurrentVersion,c=t[1],s="healthy"===o.health,u=parseInt(o.chains[0].chainHeadBlock.number),l=parseInt(o.chains[0].latestBlock.number),d=c-l,x=c-u,!s||d>200||x>200?i({status:r.NOT_OK,currentBlock:c,chainHeadBlock:u,latestBlock:l,blockDifference:d}):d>50||x>50?i({status:r.WARNING,currentBlock:c,chainHeadBlock:u,latestBlock:l,blockDifference:d}):i({status:r.OK,currentBlock:c,chainHeadBlock:u,latestBlock:l,blockDifference:d}),[3,3];case 2:return h=p.sent(),console.error("Failed to perform health check for ".concat(e," subgraph"),h),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)})()},[e]),t};function E(){var e=(0,u.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return E=function(){return e},e}function O(){var e=(0,u.Z)(["\n  gap: 7px;\n"]);return O=function(){return e},e}function R(){var e=(0,u.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return R=function(){return e},e}var A,D=(0,h.ZP)(p.Z).withConfig({componentId:"sc-46961c6e-0"})(E()),N=(0,h.ZP)(m.Z).withConfig({componentId:"sc-46961c6e-1"})(O()),M=(0,h.ZP)(f.Z).withConfig({componentId:"sc-46961c6e-2"})(R(),function(e){var n=e.$color;return e.theme.colors[n]}),B=function(e){var n=e.color,t=e.label,r=e.description,i=e.currentBlock,o=e.secondRemainingBlockSync,c=e.blockNumberFromSubgraph,s=(0,x.$G)().t;return(0,l.jsxs)(f.Z,{children:[(0,l.jsxs)(N,{pb:"10px",children:[(0,l.jsx)(M,{$color:n}),(0,l.jsx)(g.Z,{children:t})]}),(0,l.jsx)(g.Z,{pb:"24px",children:r}),(0,l.jsxs)(g.Z,{children:[(0,l.jsxs)("strong",{children:[s("Chain Head Block"),":"]})," ",i]}),(0,l.jsxs)(g.Z,{children:[(0,l.jsxs)("strong",{children:[s("Latest Subgraph Block"),":"]})," ",c]}),(0,l.jsxs)(g.Z,{children:[(0,l.jsxs)("strong",{children:[s("Delay"),":"]})," ",i-c," (",o,"s)"]})]})},L=function(e){var n,t,u,h=e.subgraphName,p=e.inline,m=e.customDescriptions,Z=e.obeyGlobalSetting,y=(0,x.$G)().t,C=I(h),T=C.status,w=C.currentBlock,k=C.blockDifference,S=C.latestBlock,P=(0,a.Z)((0,b.YF)(),1)[0],E=T===r.WARNING||T===r.NOT_OK,O={delayed:{label:y("Delayed"),color:"failure",description:null!==(i=null==m?void 0:m.delayed)&&void 0!==i?i:y("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},slow:{label:y("Slight delay"),color:"warning",description:null!==(o=null==m?void 0:m.slow)&&void 0!==o?o:y("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},healthy:{label:y("Fast"),color:"success",description:null!==(c=null==m?void 0:m.healthy)&&void 0!==c?c:y("No issues with the subgraph.")}},R=k*d.hJ,A=O[T===r.NOT_OK?"delayed":T===r.WARNING?"slow":"healthy"],L=(0,j.Z)((0,l.jsx)(B,(0,s.Z)({currentBlock:w,secondRemainingBlockSync:R,blockNumberFromSubgraph:S},A)),{placement:"top"}),U=L.targetRef,H=L.tooltipVisible,_=L.tooltip;return S&&w&&((void 0===Z||Z)&&P||E)?p?(0,l.jsxs)(N,{alignItems:"center",justifyContent:"flex-end",ref:U,children:[(0,l.jsx)(M,{$color:A.color}),(0,l.jsx)(g.Z,{children:A.label}),(0,l.jsx)(v.Z,{}),H&&_]}):(0,l.jsxs)(f.Z,{position:"fixed",bottom:"calc(55px + env(safe-area-inset-bottom))",right:"5%",ref:U,"data-test":"subgraph-health-indicator",children:[H&&_,(0,l.jsx)(D,{children:(0,l.jsxs)(N,{alignItems:"center",p:"10px",children:[(0,l.jsx)(M,{$color:A.color}),(0,l.jsx)(g.Z,{children:A.label}),(0,l.jsx)(v.Z,{})]})})]}):null}},8947:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return n3}});var r,i,o,c,s,a,u,l=t(85893),d=t(47568),x=t(10253),h=t(70655),p=t(67294),m=t(11163),f=t(36399),j=t(34701),g=t(21812),v=t(75943),b=t(44147),Z=t(98553),y=t(98768),C=t(93343),T=t(52775),w=t(941),k=t(38227),S=t(88254),P=t(7447),I=t(74156),E=t(32600),O=t(26042),R=t(69396),A=t(2593),D=t(91392),N=t(97477),M=t(56906),B=t(8100),L=t(36305),U=t(42918),H=t(20877),_=t(58390),F=t(75472),G=t.n(F);(a=r||(r={}))[a.Open=0]="Open",a[a.History=1]="History",(u=i||(i={})).OPEN="open",u.CANCELLED="cancelled",u.EXECUTED="executed";var $=["gelato","openOrders"],z=["gelato","cancelledExecutedOrders"];function W(e,n){return Number(n.updatedAt)-Number(e.updatedAt)}function K(e){return V.apply(this,arguments)}function V(){return(V=(0,d.Z)(function(e){var n,t,r,i,o,c,s,a,u,l;return(0,h.__generator)(this,function(u){switch(u.label){case 0:return n=e.gelatoLimitOrders,t=e.chainId,r=e.account,i=e.orders,o=e.syncStatuses,c=(0,H.QR)(t,r),s=(0,H.AG)(c),a=i.filter(function(e){return!s.has((0,H.r6)(e))}),(0,H.ZJ)(t,r,a),[4,Promise.all((o?c.filter(function(e){return o.some(function(n){return n===e.status})}):[]).map(function(e){var t=i.find(function(n){return e.id.toLowerCase()===n.id.toLowerCase()});return t?Promise.resolve([e,t]):n?Promise.allSettled([Promise.resolve(e),n.getOrder(e.id)]):Promise.resolve([e,null])}))];case 1:return u.sent().forEach(function(e){var n,i,o=(0,x.Z)(e,2),c=o[0],s=o[1];"fulfilled"===c.status&&"fulfilled"===s.status&&(n=c.value,(i=s.value)&&Number(n.updatedAt)<Number(i.updatedAt)&&(0,H.TR)(t,r,s.value)),"rejected"===s.status&&console.error("Error fetching order from subgraph",s.reason)}),[2]}})})).apply(this,arguments)}var X=function(e){var n=(0,N.Z)(),t=n.account,r=n.chainId,o=(0,_.Z)(),c=e&&o&&t&&r,s=(0,B.ZP)(c?$:null,(0,d.Z)(function(){var e,n,c,s;return(0,h.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,o.getOpenOrders(t.toLowerCase(),!1)];case 1:return[4,K({orders:e.sent(),chainId:r,account:t,syncStatuses:[i.OPEN],gelatoLimitOrders:o})];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),console.error("Error fetching open orders from subgraph",n),[3,4];case 4:return c=(0,H.QR)(r,t).filter(function(e){return e.status===i.OPEN}),s=(0,H.QR)(r,t,!0),[2,(0,L.Z)(c.filter(function(e){return!s.filter(function(e){return e.status===i.CANCELLED}).find(function(n){return n.id.toLowerCase()===e.id.toLowerCase()})})).concat((0,L.Z)(s.filter(function(e){return e.status===i.OPEN}))).sort(W)]}})}),{refreshInterval:U.KI}).data;return c?s:[]},Q=function(e){var n=(0,N.Z)(),t=n.account,r=n.chainId,o=(0,_.Z)(),c=e&&o&&t&&r,s=(0,B.ZP)(c?z:null,(0,d.Z)(function(){var e,n,c,s,a,u,l,d;return(0,h.__generator)(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),e=t.toLowerCase(),[4,Promise.all([o.getCancelledOrders(e,!1),o.getExecutedOrders(e,!1)])];case 1:return c=(n=x.Z.apply(void 0,[h.sent(),2]))[0],s=n[1],[4,K({orders:(0,L.Z)(c).concat((0,L.Z)(s)),chainId:r,account:t})];case 2:return h.sent(),[3,4];case 3:return a=h.sent(),console.error("Error fetching history orders from subgraph",a),[3,4];case 4:return u=(0,H.QR)(r,t).filter(function(e){return e.status===i.EXECUTED}),l=(0,H.QR)(r,t).filter(function(e){return e.status===i.CANCELLED}),d=(0,H.QR)(r,t,!0).filter(function(e){return e.status===i.CANCELLED}),[2,(0,L.Z)(d).concat((0,L.Z)(l),(0,L.Z)(u)).sort(W)]}})}),{refreshInterval:U.KI}).data;return c?s:[]},q=function(){var e,n,t,r=(0,N.Z)(),i=r.chainId,o=r.account,c=(0,B.kY)().mutate,s=(0,_.Z)(),a=(0,M.h7)(),u=(0,E.D0)(),l=u.onSwitchTokens,x=u.onCurrencySelection,m=u.onUserInput,f=u.onChangeRateType,j=(0,p.useCallback)((e=(0,d.Z)(function(e,n){var t,r,o,u,l,d;return(0,h.__generator)(this,function(x){switch(x.label){case 0:if(!s)throw Error("Could not reach Gelato Limit Orders library");if(!i)throw Error("No chainId");if(!(null==s?void 0:s.signer))throw Error("No signer");return[4,s.encodeLimitOrderSubmissionWithSecret(e.inputToken,e.outputToken,e.inputAmount,e.outputAmount,e.owner)];case 1:return r=(t=x.sent()).witness,o=t.payload,u=t.order,[4,s.signer.sendTransaction((0,R.Z)((0,O.Z)({},null!=n?n:{}),{to:o.to,data:o.data,value:A.O$.from(o.value)}))];case 2:return l=x.sent(),d=Math.round(Date.now()/1e3),a(l,{summary:"Order submission",translatableSummary:{text:"Order submission"},type:"limit-order-submission",order:(0,R.Z)((0,O.Z)({},u),{createdTxHash:null==l?void 0:l.hash.toLowerCase(),witness:r,status:"open",updatedAt:d.toString()})}),c($),c(z),[2,l]}})}),function(n,t){return e.apply(this,arguments)}),[a,i,s,c]),g=(0,p.useCallback)((n=(0,d.Z)(function(e,n,t){var r,u,l,d;return(0,h.__generator)(this,function(d){switch(d.label){case 0:if(!s)throw Error("Could not reach Gelato Limit Orders library");if(!i)throw Error("No chainId");if(!o)throw Error("No account");return r=Boolean(e.module&&e.inputToken&&e.owner&&e.witness&&e.data),[4,s.cancelLimitOrder(e,r,null!=t?t:{gasLimit:2e6})];case 1:return u=d.sent(),l=Math.round(Date.now()/1e3),a(u,{summary:n?"Order cancellation: ".concat(n.inputAmount," ").concat(n.inputTokenSymbol," for ").concat(n.outputAmount," ").concat(n.outputTokenSymbol):"Order cancellation",type:"limit-order-cancellation",order:(0,R.Z)((0,O.Z)({},e),{updatedAt:l.toString(),status:"cancelled",cancelledTxHash:null==u?void 0:u.hash.toLowerCase()})}),c($),c(z),[2,u]}})}),function(e,t,r){return n.apply(this,arguments)}),[s,i,o,a,c]),v=(0,p.useCallback)(function(e,n){m(e,n)},[m]),b=(0,p.useCallback)(function(e,n){x(e,n)},[x]),Z=(0,p.useCallback)(function(){l()},[l]),y=(0,p.useCallback)((t=(0,d.Z)(function(e,n){return(0,h.__generator)(this,function(t){return e===D.j.MUL?(n&&m(D.g.PRICE,n.invert().toSignificant(6)),f(D.j.DIV)):(n&&m(D.g.PRICE,n.toSignificant(6)),f(D.j.MUL)),[2]})}),function(e,n){return t.apply(this,arguments)}),[f,m]);return{handleLimitOrderSubmission:j,handleLimitOrderCancellation:g,handleInput:v,handleCurrencySelection:b,handleSwitchTokens:Z,handleRateType:y}},Y=function(){var e=(0,E.b)(),n=(0,E.hH)();return{handlers:q(),derivedOrderInfo:e,orderState:n}},J=t(61744),ee=t(94293),en=t(68492),et=t(56974),er=t(13629),ei=t(921),eo=t(19915),ec=t(63850),es=t(94544),ea=t(11372),eu=t(32288),el=t(29315),ed=t(8008),ex=(0,p.memo)(function(){var e=(0,T.$G)().t,n=(0,x.Z)((0,ei.$c)(),2),t=n[0],r=n[1],i=(0,x.Z)((0,g.Z)((0,l.jsx)(ed.Z,{id:"disclaimer-limit-order",header:e("I acknowledge that:"),checks:[{key:"price-checkbox",content:e("I understand that small orders are executed at higher execution price due to gas fees.")},{key:"taxtoken-checkbox",content:e("I understand that using taxed tokens on limit orders is highly discouraged and not recommended - Taxed tokens can be stuck in limit orders and lost forever because of impossibility to execute an order for such tokens")},],onSuccess:function(){return r(!0)}}),!1,!1),2),o=i[0],c=i[1];return(0,p.useEffect)(function(){return t||o(),function(){c()}},[t]),null}),eh=t(7297),ep=t(87379);function em(){var e=(0,eh.Z)(["\n  position: relative;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 1rem;\n"]);return em=function(){return e},e}function ef(){var e=(0,eh.Z)(["\n  flex-shrink: 0;\n  height: fit-content;\n  padding: 0 24px;\n\n  "," {\n    padding: 0 40px;\n  }\n\n  "," {\n    ",";\n  }\n"]);return ef=function(){return e},e}function ej(){var e=(0,eh.Z)(["\n  width: 328px;\n"]);return ej=function(){return e},e}var eg=(0,ep.ZP)(v.Z).withConfig({componentId:"sc-8e2c23ef-0"})(em()),ev=(0,ep.ZP)(v.Z).withConfig({componentId:"sc-8e2c23ef-1"})(ef(),function(e){return e.theme.mediaQueries.lg},function(e){return e.theme.mediaQueries.xxl},function(e){return e.$isChartExpanded?"padding: 0 120px":"padding: 0 40px"}),eb=(0,ep.ZP)(b.Z).withConfig({componentId:"sc-8e2c23ef-2"})(ej()),eZ=t(89663),ey=t(53055),eC=t(78593),eT=t(69589),ew=t(66806),ek=t(62077),eS=t(56691);function eP(){var e=(0,eh.Z)(["\n  flex-direction: column;\n  align-items: center;\n  padding: 24px;\n  width: 100%;\n  border-bottom: 1px solid ",";\n"]);return eP=function(){return e},e}function eI(){var e=(0,eh.Z)(["\n  color: ",";\n"]);return eI=function(){return e},e}var eE,eO=(0,ep.ZP)(v.Z).withConfig({componentId:"sc-51532107-0"})(eP(),function(e){return e.theme.colors.cardBorder}),eR=(0,ep.ZP)(eZ.Z).withConfig({componentId:"sc-51532107-1"})(eI(),function(e){return e.theme.colors.textSubtle}),eA=function(e){var n=e.title,t=e.subtitle,r=e.setIsChartDisplayed,i=e.isChartDisplayed,o=function(){r(function(e){return!e})},c=(0,x.Z)((0,g.Z)((0,l.jsx)(eS.Z,{})),1)[0];return(0,l.jsxs)(eO,{children:[(0,l.jsxs)(v.Z,{width:"100%",alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(v.Z,{flex:"1",children:r&&(0,l.jsx)(eR,{onClick:o,variant:"text",scale:"sm",children:i?(0,l.jsx)(ey.Z,{color:"textSubtle"}):(0,l.jsx)(eC.Z,{width:"24px",color:"textSubtle"})})}),(0,l.jsx)(v.Z,{flex:"1",justifyContent:"center",children:(0,l.jsx)(eT.Z,{as:"h2",children:n})}),(0,l.jsx)(v.Z,{flex:"1",justifyContent:"flex-end",children:(0,l.jsx)(eZ.Z,{onClick:c,variant:"text",scale:"sm",children:(0,l.jsx)(ew.Z,{color:"textSubtle",width:"24px"})})})]}),(0,l.jsx)(v.Z,{alignItems:"center",children:(0,l.jsx)(ek.Z,{color:"textSubtle",fontSize:"14px",children:t})})]})},eD=t(14924),eN=t(32762),eM=t(88896),eB=t(63771),eL=t(20363),eU=t(95160),eH=t(97119);(eE=o||(o={})).ABOVE="above",eE.BELOW="below",eE.MARKET="market";var e_=function(e,n){if(e){if(e.equalTo(0))return[n("at market price"),o.MARKET];var t=parseFloat(e.toSignificant(6)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2});return e.lessThan("0")?[n("%percentage%% below market",{percentage:t}),o.BELOW]:[n("%percentage%% above market",{percentage:t}),o.ABOVE]}return[null,null]};function eF(){var e=(0,eh.Z)(["\n  text-align: right;\n"]);return eF=function(){return e},e}function eG(){var e=(0,eh.Z)(["\n  cursor: pointer;\n"]);return eG=function(){return e},e}var e$=RegExp("^\\d*(?:\\\\[.])?\\d*$"),ez=(0,ep.ZP)(eN.Z).withConfig({componentId:"sc-595efb6e-0"})(eF()),eW=(0,ep.ZP)(v.Z).withConfig({componentId:"sc-595efb6e-1"})(eG()),eK=(c={},(0,eD.Z)(c,o.ABOVE,"success"),(0,eD.Z)(c,o.BELOW,"failure"),(0,eD.Z)(c,o.MARKET,"textSubtle"),c),eV=function(e){var n,t=e.id,r=e.value,i=e.onUserInput,o=e.inputCurrency,c=e.outputCurrency,s=e.percentageRateDifference,a=e.rateType,u=e.handleRateType,d=e.price,h=e.handleResetToMarketPrice,p=e.realExecutionPriceAsString,m=e.disabled,f=(0,T.$G)().t,j=a===D.j.MUL?"".concat(null==c?void 0:c.symbol," per ").concat(null==o?void 0:o.symbol):"".concat(null==o?void 0:o.symbol," per ").concat(null==c?void 0:c.symbol),g=function(){u(a,d)},b=(0,eM.Z)((0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ek.Z,{children:f("The real execution price includes the gas cost necessary to execute your order and guarantees that your order will be executed at the desired price.")}),(0,l.jsx)(ek.Z,{children:f("It fluctuates according to gas prices when the order is getting executed.")}),(null==o?void 0:o.symbol)&&(null==c?void 0:c.symbol)&&p&&(0,l.jsx)(ek.Z,{children:"never executes"===p?f("Assuming the current gas price, this order will never be executed. Try increasing the number of tokens to swap in your order."):f("Assuming current gas price it should execute when 1 %assetOneSymbol% = %price% %assetTwoSymbol%",{assetOneSymbol:a===D.j.MUL?null==o?void 0:o.symbol:null==c?void 0:c.symbol,assetTwoSymbol:a===D.j.MUL?null==c?void 0:c.symbol:null==o?void 0:o.symbol,price:p})})]}),{placement:"top"}),y=b.targetRef,C=b.tooltip,w=b.tooltipVisible,k=function(e){var n=e.target.value.replace(/,/g,".");(""===n||e$.test((0,eH.hr)(n)))&&i(n)},S=null===(n=null==s?void 0:s.equalTo(0))||void 0===n||n,P=(0,x.Z)(e_(s,f),2),I=P[0],E=eK[P[1]],O="never executes"===p?f("never executes"):p;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(v.Z,{justifyContent:"space-between",id:t,children:[(0,l.jsxs)(v.Z,{alignItems:"center",children:[(0,l.jsx)(ek.Z,{mr:"8px",color:"secondary",fontSize:"12px",bold:!0,textTransform:"uppercase",children:f("Price")}),(0,l.jsx)(Z.Z,{onClick:h,startIcon:(0,l.jsx)(eB.Z,{color:S?"textDisabled":"primary"}),variant:"secondary",scale:"xs",disabled:S,children:(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,color:S?"textDisabled":"primary",textTransform:"uppercase",children:f("Market")})})]}),I&&(0,l.jsx)(ek.Z,{color:E,fontSize:"12px",children:I})]}),(0,l.jsx)(ez,{value:r,disabled:m,onChange:k,autoComplete:"off",autoCorrect:"off",pattern:"^[0-9]*[.,]?[0-9]*$",minLength:1,maxLength:79,spellCheck:"false",type:"text",inputMode:"decimal"}),o&&c&&(0,l.jsxs)(eW,{justifyContent:"flex-end",alignItems:"center",onClick:g,children:[(0,l.jsx)(ek.Z,{small:!0,bold:!0,children:j}),(0,l.jsx)(eL.Z,{color:"textSubtle",width:"24px",ml:"4px"})]}),(0,l.jsx)(v.Z,{justifySelf:"flex-end",mb:"8px",minHeight:"16px",children:p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ek.Z,{small:!0,color:"textSubtle",mr:"4px",children:f("Real execution price: %price%",{price:O})}),(0,l.jsxs)("span",{ref:y,children:[(0,l.jsx)(eU.Z,{color:"textSubtle"}),w&&C]})]})})]})},eX=t(45203),eQ=t(40589),eq=t(30445);function eY(){var e=(0,eh.Z)(["\n  box-shadow: inset 0px -2px 0px rgba(0, 0, 0, 0.1);\n  .icon-up-down {\n    display: none;\n  }\n  &:hover {\n    background-color: ",";\n    .icon-down {\n      display: none;\n      fill: white;\n    }\n    .icon-up-down {\n      display: block;\n      fill: white;\n    }\n  }\n"]);return eY=function(){return e},e}var eJ=(0,ep.ZP)(eZ.Z).withConfig({componentId:"sc-8d0b172a-0"})(eY(),function(e){return e.theme.colors.primary}),e0=function(e){var n=e.handleSwitchTokens,t=e.color,r=(0,p.useCallback)(function(){return null==n?void 0:n()},[n]);return(0,l.jsx)(w.Tz,{justify:"space-between",children:(0,l.jsx)(eq.BA,{justify:"center",style:{padding:"0 1rem"},children:(0,l.jsxs)(eJ,{variant:"light",scale:"sm",onClick:r,children:[(0,l.jsx)(eX.Z,{className:"icon-down",color:t}),(0,l.jsx)(eQ.Z,{className:"icon-up-down",color:t})]})})})},e1=t(26118),e2=t(20353),e4=t(12587),e6=t(51983);function e7(){var e=(0,eh.Z)(["\n  & > div {\n    width: 100%;\n    background-color: ",";\n    border: 0;\n  }\n  & button {\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n  }\n"]);return e7=function(){return e},e}var e8=ep.ZP.div.withConfig({componentId:"sc-335004fc-0"})(e7(),function(e){return e.theme.colors.input}),e3=function(e){var n=e.activeIndex,t=e.onItemClick,r=(0,ec.ZP)().theme,i=(0,T.$G)().t;return(0,l.jsx)(e8,{children:(0,l.jsx)(e4.Z,{activeIndex:n,onItemClick:t,children:[i("Open Orders"),i("Order History")].map(function(e,t){return(0,l.jsx)(e6.Z,{style:{color:t===n?r.colors.text:r.colors.textSubtle,backgroundColor:t===n?r.card.background:r.colors.input},children:e},e)})})})},e9=t(44391),e5=t(39853),ne=t(37303),nn=t(46472),nt=t(41166),nr=function(e){if(e)return parseFloat(e.toSignificant(18)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:8})},ni=function(e){var n,t=(0,N.Z)().chainId,r=(0,_.Z)(),o=(0,nt.U8)(e.inputToken),c=(0,nt.U8)(e.outputToken),s=(0,M.ub)(e.createdTxHash),a=(0,M.ub)(null!==(n=e.cancelledTxHash)&&void 0!==n?n:void 0),u=(0,p.useMemo)(function(){if(o&&e.inputAmount)return nn.ih.fromRawAmount(o,e.inputAmount)},[o,e.inputAmount]),l=(0,p.useMemo)(function(){return e.adjustedMinReturn?e.adjustedMinReturn:r&&t&&e.minReturn?r.getAdjustedMinReturn(e.minReturn):void 0},[t,r,e.adjustedMinReturn,e.minReturn]),d=(0,p.useMemo)(function(){if(c&&l)return nn.ih.fromRawAmount(c,l)},[c,l]),x=(0,p.useMemo)(function(){return(0,er.Z)(u,d)},[u,d]);return{inputToken:o,outputToken:c,inputAmount:nr(u),outputAmount:nr(d),executionPrice:nr(x),invertedExecutionPrice:nr(null==x?void 0:x.invert()),isOpen:e.status===i.OPEN,isCancelled:e.status===i.CANCELLED,isExecuted:e.status===i.EXECUTED,isSubmissionPending:s,isCancellationPending:a,bscScanUrls:{created:e.createdTxHash?(0,eH.C)(e.createdTxHash,"transaction"):null,executed:e.executedTxHash?(0,eH.C)(e.executedTxHash,"transaction"):null,cancelled:e.cancelledTxHash?(0,eH.C)(e.cancelledTxHash,"transaction"):null}}},no=t(44787),nc=function(e){var n=e.icon,t=e.text,r=e.bold;return(0,l.jsxs)(v.Z,{alignItems:"center",children:[(0,l.jsx)(ek.Z,{color:"text",mr:"8px",bold:void 0!==r&&r,textTransform:"uppercase",children:t}),n]})},ns=function(e){var n=e.currency,t=e.bold;return(0,l.jsx)(nc,{bold:t,text:null==n?void 0:n.symbol,icon:(0,l.jsx)(no.Z,{currency:n})})},na=t(85937),nu=t(22769),nl=t(69136),nd=t(38695),nx=function(e){var n=e.firstRow,t=e.secondRow;return(0,l.jsxs)(b.Z,{children:[(0,l.jsx)(b.Z,{mb:"4px",children:n}),(0,l.jsx)(b.Z,{children:t})]})},nh=t(27208),np=function(){var e=(0,T.$G)().t;return(0,l.jsx)(nh.Z,{variant:"warning",mt:"24px",children:(0,l.jsxs)(nh.Y,{children:[(0,l.jsx)("b",{children:e("Real Execution Price:")}),(0,l.jsxs)("ol",{children:[(0,l.jsx)("li",{children:e("Your execution gas fees are paid for by the spread between your specified price and the real execution price.")}),(0,l.jsx)("li",{children:e("Gas fees are volatile and thus the exact market price at which your order will execute is unpredictable.")}),(0,l.jsx)("li",{children:e("It might take much longer than you expected to reach the price that fills your order + fees.")})]}),(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:e('"Fee on Transfer" Tokens')}),(0,l.jsx)("ol",{children:(0,l.jsx)("li",{children:e('"Fee on transfer" tokens should not be used with Limit Orders (use at your own risk)')})})]})})};function nm(){var e=(0,eh.Z)(["\n  border-radius: 16px;\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return nm=function(){return e},e}var nf,nj=ep.ZP.div.withConfig({componentId:"sc-1ad58112-0"})(nm(),function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.background}),ng=function(e){var n,t,r,i,o,c,s=e.onDismiss,a=e.order,u=e.formattedOrder,d=(0,N.Z)().chainId,x=(0,ec.ZP)().theme,h=(0,T.$G)().t,m=q().handleLimitOrderCancellation,f=(0,j.Z)().isMobile,g=(0,p.useState)({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:void 0}),b=g[0],y=b.cancellationErrorMessage,C=b.attemptingTxn,w=b.txHash,k=g[1],S=(0,p.useCallback)(function(){if(m){var e,n,t;k({attemptingTxn:!0,cancellationErrorMessage:void 0,txHash:void 0}),m(a,(null===(e=u.inputToken)||void 0===e?void 0:e.symbol)&&(null===(n=u.outputToken)||void 0===n?void 0:n.symbol)&&u.inputAmount&&u.outputAmount?{inputTokenSymbol:u.inputToken.symbol,outputTokenSymbol:u.outputToken.symbol,inputAmount:u.inputAmount,outputAmount:u.outputAmount}:void 0).then(function(e){k({attemptingTxn:!1,cancellationErrorMessage:void 0,txHash:e.hash})}).catch(function(e){k({attemptingTxn:!1,cancellationErrorMessage:e.message,txHash:void 0})})}},[m,u.inputAmount,u.outputAmount,null===(n=u.inputToken)||void 0===n?void 0:n.symbol,null===(t=u.outputToken)||void 0===t?void 0:t.symbol,a,]),P="1 ".concat(null===(r=u.inputToken)||void 0===r?void 0:r.symbol," = ").concat(u.executionPrice," ").concat(null===(i=u.outputToken)||void 0===i?void 0:i.symbol),I="1 ".concat(null===(o=u.outputToken)||void 0===o?void 0:o.symbol," = ").concat(u.invertedExecutionPrice," ").concat(null===(c=u.inputToken)||void 0===c?void 0:c.symbol),E=u.isOpen,O=u.isExecuted,R=u.isCancelled,A=u.isSubmissionPending,D=u.isCancellationPending,M=u.bscScanUrls,B=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(v.Z,{width:"100%",justifyContent:"space-between",children:[(0,l.jsx)(nx,{firstRow:(0,l.jsx)(ek.Z,{children:u.inputAmount}),secondRow:(0,l.jsx)(ns,{currency:u.inputToken})}),(0,l.jsx)(ne.Z,{}),(0,l.jsx)(nx,{firstRow:(0,l.jsx)(ek.Z,{children:u.outputAmount}),secondRow:(0,l.jsx)(ns,{currency:u.outputToken})})]}),(0,l.jsx)(nv,{currentPriceExchangeRateText:"0.002474 BNB = 1 BUSD",currentPriceExchangeRateTextReversed:"404.11169 BUSD = 1 BNB",limitPriceExchangeRateText:P,limitPriceExchangeRateTextReversed:I,isOpen:E,isExecuted:O,isCancelled:R,isSubmissionPending:A,isCancellationPending:D}),(0,l.jsx)(np,{}),(0,l.jsxs)(v.Z,{flexDirection:"column",children:[E?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:u.bscScanUrls.created,children:h("View on BscScan")}),!A&&(0,l.jsx)(Z.Z,{variant:"danger",mt:"16px",onClick:S,children:h("Cancel Order")})]}):(0,l.jsx)(Z.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:u.bscScanUrls.created,children:h("View order creation on BSCScan")}),R&&M.cancelled&&(0,l.jsx)(Z.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:M.cancelled,children:h("View order cancellation on BSCScan")}),O&&M.executed&&(0,l.jsx)(Z.Z,{variant:"primary",mt:"16px",as:"a",external:!0,href:M.executed,children:h("View order execution on BSCScan")})]})]});return(0,l.jsx)(na.Z,{title:h("Open Order Details"),headerBackground:x.colors.gradientCardHeader,style:{width:f?"100%":"436px"},onDismiss:s,children:C?(0,l.jsx)(nb,{}):w?(0,l.jsx)(nd.rD,{chainId:d,hash:w,onDismiss:s}):y?(0,l.jsx)(nd.ht,{onDismiss:s,message:y}):B})},nv=(0,p.memo)(function(e){var n=e.limitPriceExchangeRateText,t=e.limitPriceExchangeRateTextReversed,r=e.isOpen,i=e.isExecuted,o=e.isCancelled,c=e.isSubmissionPending,s=e.isCancellationPending,a=(0,T.$G)().t;return(0,l.jsx)(nj,{children:(0,l.jsxs)(b.Z,{mb:"4px",children:[r&&c&&(0,l.jsx)(nu.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:a("Pending")}),i&&(0,l.jsx)(nu.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"success",children:a("Filled")}),s&&(0,l.jsx)(nu.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"warning",children:a("Cancelling")}),o&&!s&&(0,l.jsx)(nu.Z,{outline:!0,scale:"sm",p:"8px",mb:"16px",variant:"failure",children:a("Cancelled")}),(0,l.jsx)(ek.Z,{fontSize:"14px",color:"textSubtle",children:a("Limit Price")}),(0,l.jsxs)(v.Z,{flexDirection:"column",children:[(0,l.jsx)(ek.Z,{fontSize:"14px",children:n}),(0,l.jsx)(ek.Z,{fontSize:"14px",children:t})]})]})})}),nb=(0,p.memo)(function(){var e=(0,T.$G)().t;return(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)(v.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,l.jsx)(ek.Z,{fontSize:"20px",small:!0,color:"secondary",children:e("Confirm")}),(0,l.jsx)(ek.Z,{small:!0,color:"textSubtle",mt:"8px",children:e("Please confirm the transaction in your wallet")})]}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(nl.Z,{size:70})})]})});(nf=s||(s={})).TAG="Tag",nf.TEXT="Text";var nZ=function(e){var n=e.element,t=e.text,r=e.color;return n===s.TAG?(0,l.jsx)(nu.Z,{outline:!0,scale:"sm",variant:r,ml:"auto",children:t}):(0,l.jsx)(ek.Z,{color:r,children:t})},ny=function(e){var n=e.formattedOrder,t=e.showOpenTag,r=e.element,i=void 0===r?s.TAG:r,o=(0,T.$G)().t,c=n.isOpen,a=n.isSubmissionPending,u=n.isCancelled,d=n.isCancellationPending,x=n.isExecuted;return c&&!a&&void 0!==t&&t?(0,l.jsx)(nZ,{element:i,text:o("Open"),color:"success"}):c&&a?(0,l.jsx)(nZ,{element:i,text:o("Pending"),color:"warning"}):u&&!d?(0,l.jsx)(nZ,{element:i,text:o("Cancelled"),color:"failure"}):d?(0,l.jsx)(nZ,{element:i,text:o("Cancelling"),color:"warning"}):x?(0,l.jsx)(nZ,{element:i,text:o("Filled"),color:"success"}):null},nC=function(e){var n=e.order,t=(0,T.$G)().t,r=ni(n),i=r.inputToken,o=r.outputToken,c=r.inputAmount,s=r.outputAmount,a=r.executionPrice,u=(0,x.Z)((0,g.Z)((0,l.jsx)(ng,{order:n,formattedOrder:r})),1)[0];return(0,l.jsx)(v.Z,{width:"100%",justifyContent:"center",alignItems:"center",onClick:u,children:(0,l.jsxs)(b.Z,{width:"100%",children:[(0,l.jsxs)(v.Z,{mb:"16px",children:[(0,l.jsx)(ns,{bold:!0,currency:i}),(0,l.jsx)(ne.Z,{color:"textSubtle"}),(0,l.jsx)(ns,{bold:!0,currency:o}),(0,l.jsx)(ny,{formattedOrder:r})]}),(0,l.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:t("From")}),(0,l.jsx)(ek.Z,{small:!0,textTransform:"uppercase",children:"".concat(c," ").concat(null==i?void 0:i.symbol)})]}),(0,l.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:t("To")}),(0,l.jsx)(ek.Z,{small:!0,textTransform:"uppercase",children:"".concat(s," ").concat(null==o?void 0:o.symbol)})]}),(0,l.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,color:"textSubtle",textTransform:"uppercase",children:t("Price")}),(0,l.jsx)(ek.Z,{small:!0,children:"".concat(a," ").concat(null==o?void 0:o.symbol," per ").concat(null==i?void 0:i.symbol)})]})]})})};function nT(){var e=(0,eh.Z)(["\n  cursor: pointer;\n\n  &:hover {\n    background: ",";\n  }\n"]);return nT=function(){return e},e}var nw=ep.ZP.tr.withConfig({componentId:"sc-a6176c36-0"})(nT(),function(e){return e.theme.colors.backgroundDisabled}),nk=function(e){var n=e.orders;return(0,l.jsx)(e9.Z,{children:(0,l.jsx)("tbody",{children:n.map(function(e){return(0,l.jsx)(nw,{children:(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nC,{order:e})})},e.id)})})})},nS=(0,p.memo)(nk),nP=t(84815),nI=function(e){var n=e.order,t=ni(n),r=t.inputToken,i=t.outputToken,o=t.inputAmount,c=t.outputAmount,a=t.executionPrice,u=(0,x.Z)((0,g.Z)((0,l.jsx)(ng,{order:n,formattedOrder:t})),1)[0];return(0,l.jsxs)("tr",{children:[(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nx,{firstRow:o,secondRow:(0,l.jsx)(ns,{bold:!0,currency:r})})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nx,{firstRow:c,secondRow:(0,l.jsx)(ns,{bold:!0,currency:i})})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nx,{firstRow:a,secondRow:(0,l.jsx)(nc,{text:"".concat(null==i?void 0:i.symbol,"/").concat(null==r?void 0:r.symbol),icon:(0,l.jsx)(eL.Z,{})})})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(ny,{formattedOrder:t,showOpenTag:!0,element:s.TEXT})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(eZ.Z,{variant:"text",onClick:u,children:(0,l.jsx)(nP.Z,{})})})]})},nE=function(e){var n=e.orders,t=(0,T.$G)().t;return(0,l.jsx)(e9.Z,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)(e5.Th,{children:(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:t("From")})}),(0,l.jsx)(e5.Th,{children:(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:t("To")})}),(0,l.jsx)(e5.Th,{children:(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:t("Limit Price")})}),(0,l.jsx)(e5.Th,{children:(0,l.jsx)(ek.Z,{fontSize:"12px",bold:!0,textTransform:"uppercase",color:"textSubtle",textAlign:"left",children:t("Status")})}),(0,l.jsx)(e5.Th,{})]})}),(0,l.jsx)("tbody",{children:n.map(function(e){return(0,l.jsx)(nI,{order:e},e.id)})})]})})},nO=(0,p.memo)(nE),nR=t(66260),nA=t(87844),nD=t(18029),nN=t(22344),nM=t(55787),nB=function(e){var n=e.orderCategory,t=(0,T.$G)().t;return(0,l.jsxs)(v.Z,{p:"24px",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,l.jsx)(nM.Z,{width:64}),(0,l.jsx)(ek.Z,{color:"textDisabled",children:t(n===r.Open?"No Open Orders":"No Order History")})]})},nL=t(62685),nU=function(){return(0,l.jsx)(e9.Z,{children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})}),(0,l.jsx)(e5.Td,{children:(0,l.jsx)(nL.Z,{})})]})]})})},nH=(0,p.memo)(nU);function n_(){var e=(0,eh.Z)(["\n  color: ",";\n  padding: 0 20px;\n  :hover {\n    cursor: pointer;\n  }\n"]);return n_=function(){return e},e}var nF=ep.ZP.div.withConfig({componentId:"sc-d6270113-0"})(n_(),function(e){return e.theme.colors.primary}),nG=function(e){var n=e.data,t=e.orderCategory,r=e.itemsPerPage,i=void 0===r?5:r,o=e.children,c=(0,T.$G)().t,s=(0,p.useState)(1),a=s[0],u=s[1],d=Array.isArray(n)?n.length:0,x=(0,p.useMemo)(function(){return d?Math.ceil(d/i):1},[d,i]),h=(0,p.useCallback)(function(){u(function(e){return e===x?e:e+1})},[x]),m=(0,p.useCallback)(function(){u(function(e){return 1===e?e:e-1})},[]),f=(0,p.useMemo)(function(){return i*(a-1)},[a,i]),j=(0,p.useMemo)(function(){return i*a},[a,i]),g=(0,p.useMemo)(function(){return Array.isArray(n)?n.slice(f,j):[]},[n,f,j]);return(0,p.useEffect)(function(){u(1)},[t]),(0,l.jsxs)(l.Fragment,{children:[o({paginatedData:g}),!n&&(0,l.jsx)(nH,{}),n&&!d&&(0,l.jsx)(nB,{orderCategory:t}),(0,l.jsxs)(nR.Z,{gridGap:"16px",gridTemplateColumns:["1fr",null,null,null,"1fr 2fr 1fr"],mt:"16px",mb:"16px",px:"16px",children:[(0,l.jsx)(b.Z,{}),(0,l.jsxs)(v.Z,{width:"100%",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(nF,{onClick:m,children:(0,l.jsx)(nA.Z,{color:1===a?"textDisabled":"primary"})}),(0,l.jsx)(ek.Z,{children:c("Page %page% of %maxPage%",{page:a,maxPage:x})}),(0,l.jsx)(nF,{onClick:h,children:(0,l.jsx)(nD.Z,{color:a===x?"textDisabled":"primary"})})]}),(0,l.jsx)(v.Z,{width:"100%",justifyContent:["center",null,null,null,"flex-end"],children:(0,l.jsx)(nN.default,{subgraphName:"gelatodigital/limit-orders-bsc",inline:!0})})]})]})},n$=(0,p.memo)(nG),nz=(0,p.memo)(function(e){var n,t,i,o,c=e.orderCategory,s=e.isCompact,a=(t=Q(c===r.History),i=X(c===r.Open),o=(0,p.useMemo)(function(){return c===r.Open?i:t},[c,i,t]),(0,p.useMemo)(function(){return Array.isArray(o)?G()(o,function(e){return parseInt(e.createdAt)},"desc"):o},[o]));return(0,l.jsx)(n$,{data:a,orderCategory:c,children:function(e){var n=e.paginatedData;return s?(0,l.jsx)(nS,{orders:n}):(0,l.jsx)(nO,{orders:n})}})}),nW=function(e){var n=e.isCompact,t=(0,p.useState)(r.Open),i=t[0],o=t[1],c=(0,p.useCallback)(function(e){return o(e)},[]);return(0,l.jsx)(v.Z,{flex:"1",justifyContent:"center",mb:"24px",children:(0,l.jsxs)(e2.Z,{style:{width:"100%",height:"max-content"},children:[(0,l.jsx)(e3,{onItemClick:c,activeIndex:i}),(0,l.jsx)(nz,{orderCategory:i,isCompact:n})]})})},nK=(0,p.memo)(nW),nV=t(19259),nX=t(73938);function nQ(){var e=(0,eh.Z)(["\n  border-radius: 16px;\n  padding: 16px;\n  margin-top: 24px;\n  border: 1px solid ",";\n  background-color: ",";\n"]);return nQ=function(){return e},e}var nq=ep.ZP.div.withConfig({componentId:"sc-4863602a-0"})(nQ(),function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.background}),nY=function(e){var n=e.onDismiss,t=e.currencies,r=e.formattedAmounts,i=e.currentMarketRate,o=e.currentMarketRateInverted,c=e.limitPrice,s=e.limitPriceInverted,a=e.percentageRateDifference,u=e.onConfirm,d=e.attemptingTxn,x=e.txHash,h=e.customOnDismiss,p=e.swapErrorMessage,m=(0,N.Z)().chainId,f=(0,T.$G)().t,g=(0,ec.ZP)().theme,b=(0,nX.pu)(t.output,m),y=(0,j.Z)().isMobile,C=function(){h&&h(),n()};return(0,l.jsxs)(na.Z,{title:f("Confirm Limit Order"),headerBackground:g.colors.gradientCardHeader,onDismiss:C,style:{width:y?"100%":"436px"},children:[d?(0,l.jsx)(n1,{}):x?(0,l.jsx)(nd.rD,{chainId:m,hash:x,currencyToAdd:b,onDismiss:C}):p?(0,l.jsx)(nd.ht,{onDismiss:C,message:p}):(0,l.jsx)(nJ,{currencies:t,formattedAmounts:r,currentMarketRate:i,currentMarketRateInverted:o,limitPrice:c,limitPriceInverted:s,percentageRateDifference:a}),!x&&!p&&(0,l.jsx)(v.Z,{justifyContent:"center",mt:"24px",children:(0,l.jsx)(Z.Z,{scale:"md",variant:"primary",onClick:u,width:"100%",disabled:d,children:f(d?"Confirming...":"Confirm")})})]})},nJ=function(e){var n,t,r,i,o,c,s,a,u,d,x=e.currencies,h=e.formattedAmounts,p=e.currentMarketRate,m=e.currentMarketRateInverted,f=e.limitPrice,j=e.limitPriceInverted,g=e.percentageRateDifference,b=(0,T.$G)().t,Z="1 ".concat(null===(n=x.input)||void 0===n?void 0:n.symbol," = ").concat(p," ").concat(null===(t=x.output)||void 0===t?void 0:t.symbol),y="1 ".concat(null===(r=x.output)||void 0===r?void 0:r.symbol," = ").concat(m," ").concat(null===(i=x.input)||void 0===i?void 0:i.symbol),C="1 ".concat(null===(o=x.input)||void 0===o?void 0:o.symbol," = ").concat(f," ").concat(null===(c=x.output)||void 0===c?void 0:c.symbol),w="1 ".concat(null===(s=x.output)||void 0===s?void 0:s.symbol," = ").concat(j," ").concat(null===(a=x.input)||void 0===a?void 0:a.symbol);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(v.Z,{flexDirection:"column",width:"100%",children:[(0,l.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"24px",color:"text",children:h.input}),(0,l.jsxs)(v.Z,{alignItems:"center",children:[(0,l.jsx)(ek.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(u=x.input)||void 0===u?void 0:u.symbol}),(0,l.jsx)(nV.Xw,{currency:x.input})]})]}),(0,l.jsx)(v.Z,{justifyContent:"center",children:(0,l.jsx)(eX.Z,{})}),(0,l.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"24px",color:"text",children:h.output}),(0,l.jsxs)(v.Z,{alignItems:"center",children:[(0,l.jsx)(ek.Z,{textTransform:"uppercase",color:"text",mr:"8px",children:null===(d=x.output)||void 0===d?void 0:d.symbol}),(0,l.jsx)(nV.Xw,{currency:x.output})]})]})]}),(0,l.jsx)(n0,{currentPriceExchangeRateText:Z,currentPriceExchangeRateTextReversed:y,limitPriceExchangeRateText:C,limitPriceExchangeRateTextReversed:w}),(0,l.jsx)(nh.Z,{variant:"success",mt:"24px",children:(0,l.jsx)(nh.Y,{children:b("Limit price is %percentage%% above the current market rate. The order will be executed when the market price reaches high enough above your limit price (to also pay for limit order execution gas fees).",{percentage:g})})}),(0,l.jsx)(np,{})]})},n0=(0,p.memo)(function(e){var n=e.currentPriceExchangeRateText,t=e.currentPriceExchangeRateTextReversed,r=e.limitPriceExchangeRateText,i=e.limitPriceExchangeRateTextReversed,o=(0,T.$G)().t;return(0,l.jsxs)(nq,{children:[(0,l.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,l.jsx)(ek.Z,{fontSize:"14px",color:"textSubtle",children:o("Current Market Price")}),(0,l.jsxs)(v.Z,{flexDirection:"column",children:[(0,l.jsx)(ek.Z,{color:"text",fontSize:"14px",bold:!0,children:n}),(0,l.jsx)(ek.Z,{color:"text",fontSize:"14px",children:t})]})]}),(0,l.jsxs)(v.Z,{justifyContent:"space-between",mt:"16px",children:[(0,l.jsx)(ek.Z,{fontSize:"14px",color:"textSubtle",children:o("Limit Price")}),(0,l.jsxs)(v.Z,{flexDirection:"column",children:[(0,l.jsx)(ek.Z,{color:"#129E7D",fontSize:"14px",bold:!0,children:r}),(0,l.jsx)(ek.Z,{color:"#129E7D",fontSize:"14px",children:i})]})]})]})}),n1=(0,p.memo)(function(){var e=(0,T.$G)().t;return(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)(v.Z,{flexDirection:"column",flexGrow:"wrap",flexBasis:"267px",children:[(0,l.jsx)(ek.Z,{fontSize:"20px",small:!0,color:"secondary",children:e("Confirm")}),(0,l.jsx)(ek.Z,{small:!0,color:"textSubtle",mt:"8px",children:e("Please confirm the transaction in your wallet")})]}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(nl.Z,{size:70})})]})}),n2=function(e,n){if(e&&n){var t=n.subtract(e).divide(e);return new nn.gG(t.numerator,t.denominator)}},n4=t(7216),n6=t(93156),n7=t(29159),n8=function(){var e,n,t,r,i,o,c=(0,el.Ge)(),s=c.account,a=c.chainId,u=(0,T.$G)().t,O=(0,m.useRouter)(),R=(0,j.Z)(),M=R.isMobile,B=R.isTablet,L=(0,ec.ZP)().theme,H=(0,x.Z)((0,ei.vD)(M),2),_=H[0],F=H[1],G=(0,p.useState)(!1),$=G[0],z=G[1],W=(0,p.useState)(_),K=W[0],V=W[1];(0,p.useEffect)(function(){F(K)},[K,F]);var X=(0,E.jj)(),Q=[(0,nt.U8)(null==X?void 0:X.inputCurrencyId),(0,nt.U8)(null==X?void 0:X.outputCurrencyId),],q=Q[0],ed=Q[1],eh=(0,p.useMemo)(function(){var e;return null!==(o=(e=[q,ed]).filter(function(e){return null==e?void 0:e.isToken}))&&void 0!==o?o:[]},[q,ed]),ep=(0,nt.e_)(),em=(0,p.useMemo)(function(){return eh&&eh.filter(function(e){return!(e.address in ep)&&e.chainId===a})},[ep,eh,a]),ef=(0,x.Z)((0,g.Z)((0,l.jsx)(n4.Z,{tokens:em,onCancel:function(){return O.push("/limit-orders")}}),!1,!1,"limitOrderTokenWarningModal"),1)[0];(0,p.useEffect)(function(){em.length>0&&ef()},[em.length]);var ej,eZ,ey,eC,eT,ew,ek,eS,eP,eI,eE,eO,eR,eD,eN=Y(),eM=eN.handlers,eB=eM.handleInput,eL=eM.handleCurrencySelection,eU=eM.handleSwitchTokens,eH=eM.handleLimitOrderSubmission,e_=eM.handleRateType,eF=eN.derivedOrderInfo,eG=eF.currencies,e$=eF.currencyBalances,ez=eF.parsedAmounts,eW=eF.formattedAmounts,eK=eF.rawAmounts,eX=eF.trade,eQ=eF.price,eq=eF.inputError,eY=eF.wrappedCurrencies,eJ=eF.singleTokenPrice,e2=eF.currencyIds,e4=eN.orderState,e6=e4.independentField,e7=e4.basisField,e8=e4.rateType,e3=(0,p.useState)({tradeToConfirm:void 0,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),e9=e3[0],e5=e9.swapErrorMessage,ne=e9.attemptingTxn,nn=e9.txHash,nr=e3[1],ni=(0,x.Z)((0,es.tz)(ez.input),2),no=ni[0],nc=ni[1],ns=(0,p.useState)(!1),na=ns[0],nu=ns[1],nl=(0,ea.i)(e$.input),nd=Boolean(nl&&(null===(e=ez.input)||void 0===e?void 0:e.equalTo(nl))),nx=null==eX?void 0:eX.executionPrice,nh=n2(nx,eQ),np=(0,p.useCallback)(function(e){eB(D.g.INPUT,e)},[eB]),nm=(0,p.useCallback)(function(e){eB(D.g.OUTPUT,e)},[eB]),nf=(0,p.useCallback)(function(e){nu(!1),eL(D.g.INPUT,e),(0,f.Z)("inputCurrency",(0,n7.H)(e))},[eL]),nj=(0,p.useCallback)(function(e){eB(D.g.PRICE,e)},[eB]),ng=(0,p.useCallback)(function(){nl&&eB(D.g.INPUT,nl.toExact())},[nl,eB]),nv=(0,p.useCallback)(function(e){eL(D.g.OUTPUT,e),(0,f.Z)("outputCurrency",(0,n7.H)(e))},[eL]),nb=(0,p.useCallback)((0,d.Z)(function(){return(0,h.__generator)(this,function(e){switch(e.label){case 0:return[4,nc()];case 1:return e.sent(),[2]}})}),[nc]),nZ=(0,p.useCallback)(function(){nn&&np("")},[nn,np]),ny=(0,p.useCallback)(function(){e7===D.g.INPUT?np(eW.input):nm(eW.output)},[np,nm,eW.input,eW.output,e7]),nC=(0,p.useCallback)(function(){if(eH){nr(function(e){return{attemptingTxn:!0,tradeToConfirm:e.tradeToConfirm,swapErrorMessage:void 0,txHash:void 0}});try{if(!(null===(e=eY.input)||void 0===e?void 0:e.address))throw Error("Invalid input currency");if(!(null===(n=eY.output)||void 0===n?void 0:n.address))throw Error("Invalid output currency");if(!eK.input)throw Error("Invalid input amount");if(!eK.output)throw Error("Invalid output amount");if(!s)throw Error("No account");var e,n,t,r,i,o,c=(null===(t=eG.input)||void 0===t?void 0:t.isToken)?null===(r=eY.input)||void 0===r?void 0:r.address:U.ag,a=(null===(i=eG.output)||void 0===i?void 0:i.isToken)?null===(o=eY.output)||void 0===o?void 0:o.address:U.ag,u={inputToken:c,outputToken:a,inputAmount:eK.input,outputAmount:eK.output,owner:s};eH(u).then(function(e){var n=e.hash;nr(function(e){return{attemptingTxn:!1,tradeToConfirm:e.tradeToConfirm,swapErrorMessage:void 0,txHash:n}})}).catch(function(e){nr(function(n){return{attemptingTxn:!1,tradeToConfirm:n.tradeToConfirm,swapErrorMessage:e.message,txHash:void 0}})})}catch(l){console.error(l)}}},[eH,s,eK.input,eK.output,eG.input,eG.output,null===(n=eY.input)||void 0===n?void 0:n.address,null===(t=eY.output)||void 0===t?void 0:t.address,]),nT=(0,p.useCallback)(function(){nu(!1),eU(),(0,f.Z)("inputCurrency",e2.output),(0,f.Z)("outputCurrency",e2.input)},[eU,e2.output,e2.input]),nw=(ej=ez.input,eZ=ez.output,eC=(0,N.Z)().chainId,eT=(0,eo.Z)(),ew=(0,ei.Fh)(),ek=(0,J.formatUnits)(ew?A.O$.from(ew).mul(et.q3):"0"),eS=(0,en.Z)(ek,eT),eP=(null==ej?void 0:ej.currency.symbol)==="BNB",eI=(0,ee.AU)(eS,eP?null:null==ej?void 0:ej.currency),eE=(0,p.useMemo)(function(){return eP?eS:eI&&(null==eI?void 0:eI.outputAmount)?eI.outputAmount.add(eI.outputAmount.multiply(2e3).divide(1e4)):void 0},[eI,eS,eP]),eO=(0,p.useMemo)(function(){return eE&&ej&&ej.subtract(eE)},[eE,ej]),eR=(0,p.useMemo)(function(){return ej&&(eI||eP)&&eO&&eZ?eP&&eS.greaterThan(ej.asFraction)?void 0:eI&&eI.outputAmount.greaterThan(ej.asFraction)?void 0:(0,er.Z)(eO,eZ):null},[eO,eZ,ej,eI,eP,eS]),eD=(0,p.useMemo)(function(){return eR?e8===D.j.DIV?eR.invert().toSignificant(6):eR.toSignificant(6):"never executes"},[e8,eR]),eC?{realExecutionPrice:eR,gasPrice:ew,realExecutionPriceAsString:eD}:{realExecutionPrice:void 0,realExecutionPriceAsString:void 0,gasPrice:void 0}).realExecutionPriceAsString,nk=(0,x.Z)((0,g.Z)((0,l.jsx)(nY,{currencies:eG,formattedAmounts:eW,currentMarketRate:null==nx?void 0:nx.toSignificant(4),currentMarketRateInverted:null==nx?void 0:nx.invert().toSignificant(4),limitPrice:null==eQ?void 0:eQ.toSignificant(6),limitPriceInverted:null==eQ?void 0:eQ.invert().toSignificant(6),percentageRateDifference:parseFloat(null==nh?void 0:nh.toSignificant(3)).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}),onConfirm:nC,attemptingTxn:ne,txHash:nn,customOnDismiss:nZ,swapErrorMessage:e5}),!0,!0,"confirmLimitOrderModal"),1)[0];(0,p.useEffect)(function(){no===es.UK.PENDING&&nu(!0)},[no,na]);var nS=!eq&&(no===es.UK.NOT_APPROVED||no===es.UK.PENDING),nP=$||K;return(0,l.jsxs)(e1.Z,{removePadding:$,hideFooterOnDesktop:nP,noMinHeight:!0,helpUrl:et.vm,children:[(0,l.jsx)(ex,{}),(0,l.jsxs)(v.Z,{width:"100%",justifyContent:"center",position:"relative",mb:nP?null:"24px",mt:$?"24px":null,children:[!M&&(0,l.jsxs)(v.Z,{width:$?"100%":"50%",maxWidth:"928px",flexDirection:"column",children:[(0,l.jsx)(eu.Z,{inputCurrencyId:e2.input,inputCurrency:eG.input,outputCurrencyId:e2.output,outputCurrency:eG.output,isChartExpanded:$,setIsChartExpanded:z,isChartDisplayed:K,currentSwapPrice:eJ,isFullWidthContainer:!0}),K&&(0,l.jsx)(b.Z,{mb:"48px"}),(0,l.jsx)(b.Z,{width:"100%",children:(0,l.jsx)(nK,{isCompact:B})})]}),(0,l.jsxs)(v.Z,{flexDirection:"column",alignItems:"center",children:[(0,l.jsx)(ev,{$isChartExpanded:!1,children:(0,l.jsx)(eb,{children:(0,l.jsxs)(S.j,{children:[(0,l.jsx)(eA,{title:u("Limit"),subtitle:u("Place a limit order to trade at a set price"),setIsChartDisplayed:V,isChartDisplayed:K}),(0,l.jsxs)(eg,{id:"limit-order-page",style:{minHeight:"412px"},children:[(0,l.jsxs)(w.Tz,{gap:"sm",children:[(0,l.jsx)(k.Z,{label:u(e6===D.g.OUTPUT?"From (estimated)":"From"),value:eW.input,showMaxButton:!nd,currency:eG.input,onUserInput:np,onMax:ng,onCurrencySelect:nf,otherCurrency:eG.output,id:"limit-order-currency-input",showCommonBases:!0,commonBasesType:n6.L0.SWAP_LIMITORDER}),(0,l.jsx)(e0,{handleSwitchTokens:nT,color:eG[D.g.INPUT]&&eG[D.g.OUTPUT]?"primary":"text"}),(0,l.jsx)(k.Z,{value:eW.output,onUserInput:nm,label:u(e6===D.g.INPUT?"To (estimated)":"To"),showMaxButton:!1,currency:eG.output,onCurrencySelect:nv,otherCurrency:eG.output,id:"limit-order-currency-output",showCommonBases:!0,commonBasesType:n6.L0.SWAP_LIMITORDER}),(0,l.jsx)(eV,{id:"limit-order-desired-rate-input",value:eW.price,onUserInput:nj,inputCurrency:eG.input,outputCurrency:eG.output,percentageRateDifference:nh,rateType:e8,handleRateType:e_,price:eQ,handleResetToMarketPrice:ny,realExecutionPriceAsString:eq?void 0:nw,disabled:!eW.input&&!eW.output})]}),(0,l.jsx)(b.Z,{mt:"0.25rem",children:s?nS?(0,l.jsx)(Z.Z,{variant:"primary",onClick:nb,id:"enable-order-button",width:"100%",disabled:na,children:na?u("Enabling %asset%",{asset:null===(r=eG.input)||void 0===r?void 0:r.symbol}):u("Enable %asset%",{asset:null===(i=eG.input)||void 0===i?void 0:i.symbol})}):(0,l.jsx)(Z.Z,{variant:"primary",onClick:function(){nr({tradeToConfirm:eX,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),nk()},id:"place-order-button",width:"100%",disabled:!!eq||"never executes"===nw,children:eq||"never executes"===nw?eq||u("Can't execute this order"):u("Place an Order")}):(0,l.jsx)(P.Z,{width:"100%"})}),(0,l.jsx)(v.Z,{mt:"16px",justifyContent:"center",children:(0,l.jsx)(y.Z,{external:!0,href:"https://www.gelato.network/",children:(0,l.jsx)("img",{src:L.isDark?"/images/powered_by_gelato_white.svg":"/images/powered_by_gelato_black.svg",alt:"Powered by Gelato",width:"170px",height:"48px"})})})]})]})})}),M&&(0,l.jsx)(v.Z,{mt:"24px",width:"100%",children:(0,l.jsx)(nK,{isCompact:!0})}),nP&&(0,l.jsx)(b.Z,{display:["none",null,null,"block"],width:"100%",height:"100%",children:(0,l.jsx)(I.Z,{variant:"side",helpUrl:et.vm})})]})]}),(0,l.jsx)(C.Z,{content:(0,l.jsx)(eu.Z,{inputCurrencyId:e2.input,inputCurrency:eG.input,outputCurrencyId:e2.output,outputCurrency:eG.output,isChartExpanded:$,setIsChartExpanded:z,isChartDisplayed:K,currentSwapPrice:eJ,isMobile:!0}),isOpen:K,setIsOpen:V})]})},n3=function(){return(0,l.jsx)(n8,{})}}},function(e){e.O(0,[2077,878,5855,8451,8939,5470,6749,1548,8884,4552,9774,2888,179],function(){return e(e.s=84120)}),_N_E=e.O()}]);