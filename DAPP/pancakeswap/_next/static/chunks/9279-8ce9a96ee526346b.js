"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9279],{81272:function(t,e,n){n.d(e,{Ck:function(){return a},ND:function(){return u},eQ:function(){return i},fq:function(){return o},v9:function(){return l},yg:function(){return c}});var r=n(97478),a=.97,o=3*r.hJ,l=5,u=2,c=200,i=10},79279:function(t,e,n){n.d(e,{ub:function(){return Q},x4:function(){return r},oO:function(){return tm},t$:function(){return tB},Fr:function(){return z},jG:function(){return tr},fq:function(){return V},HJ:function(){return tt},Tq:function(){return M},n:function(){return ta},s9:function(){return tn},D:function(){return te},yz:function(){return G},$8:function(){return to},yn:function(){return x},CM:function(){return tl},a8:function(){return ti},D5:function(){return tu},zN:function(){return td},WB:function(){return ts},ld:function(){return W},r3:function(){return Y}});var r,a=n(47568),o=n(14924),l=n(26042),u=n(69396),c=n(10253),i=n(7297),s=n(70655),d=n(28687),B=n(6680),m=n(2593),f=n(96470),p=n(9796),A=n(21421),h=n(45883),k=n(21046),N=function(t){return"CAKE"===t?"\n  id\n  createdAt\n  updatedAt\n  block\n  totalBets\n  totalBetsBull\n  totalBetsBear\n  totalCAKE\n  totalCAKEBull\n  totalCAKEBear\n  totalBetsClaimed\n  totalCAKEClaimed\n  winRate\n  averageCAKE\n  netCAKE\n":"\n  id\n  createdAt\n  updatedAt\n  block\n  totalBets\n  totalBetsBull\n  totalBetsBear\n  totalBNB\n  totalBNBBull\n  totalBNBBear\n  totalBetsClaimed\n  totalBNBClaimed\n  winRate\n  averageBNB\n  netBNB\n"},b=n(81272),v=function(t){if(null===t)return null;var e=Number(t);return Number.isNaN(e)?null:e},C=function(t){var e={id:t.id,hash:t.hash,block:v(t.block),amount:t.amount?parseFloat(t.amount):0,position:"Bull"===t.position?f.Tu.BULL:f.Tu.BEAR,claimed:t.claimed,claimedAt:v(t.claimedAt),claimedBlock:v(t.claimedBlock),claimedHash:t.claimedHash,claimedBNB:t.claimedCAKE?parseFloat(t.claimedCAKE):0,claimedNetBNB:t.claimedNetCAKE?parseFloat(t.claimedNetCAKE):0,createdAt:v(t.createdAt),updatedAt:v(t.updatedAt)};return t.user&&(e.user=E(t.user)),t.round&&(e.round=g(t.round)),e},E=function(t){var e=t||{},n=e.id,r=e.createdAt,a=e.updatedAt,o=e.block,l=e.totalBets,u=e.totalBetsBull,c=e.totalBetsBear,i=e.totalCAKE,s=e.totalCAKEBull,d=e.totalCAKEBear,B=e.totalBetsClaimed,m=e.totalCAKEClaimed,f=e.winRate,p=e.averageCAKE,A=e.netCAKE;return{id:n,createdAt:v(r),updatedAt:v(a),block:v(o),totalBets:v(l),totalBetsBull:v(u),totalBetsBear:v(c),totalBNB:i?parseFloat(i):0,totalBNBBull:s?parseFloat(s):0,totalBNBBear:d?parseFloat(d):0,totalBetsClaimed:v(B),totalBNBClaimed:m?parseFloat(m):0,winRate:f?parseFloat(f):0,averageBNB:p?parseFloat(p):0,netBNB:A?parseFloat(A):0}},g=function(t){var e,n=t.id,r=t.epoch,a=t.failed,o=t.position,l=t.startAt,u=t.startBlock,c=t.startHash,i=t.lockAt,s=t.lockBlock,d=t.lockHash,B=t.lockPrice,m=t.lockRoundId,p=t.closeAt,A=t.closeBlock,h=t.closeHash,k=t.closePrice,N=t.closeRoundId,b=t.totalBets,E=t.totalAmount,g=t.bullBets,Z=t.bullAmount,w=t.bearBets,y=t.bearAmount,F=t.bets;return{id:n,failed:a,startHash:c,lockHash:d,lockRoundId:m,closeRoundId:N,closeHash:h,position:"Bull"===o?f.Tu.BULL:"Bear"===o?f.Tu.BEAR:"House"===o?f.Tu.HOUSE:null,epoch:v(r),startAt:v(l),startBlock:v(u),lockAt:v(i),lockBlock:v(s),lockPrice:B?parseFloat(B):0,closeAt:v(p),closeBlock:v(A),closePrice:k?parseFloat(k):0,totalBets:v(b),totalAmount:E?parseFloat(E):0,bullBets:v(g),bullAmount:Z?parseFloat(Z):0,bearBets:v(w),bearAmount:y?parseFloat(y):0,bets:(void 0===F?[]:F).map(C)}},Z=function(t){var e={id:t.id,hash:t.hash,block:v(t.block),amount:t.amount?parseFloat(t.amount):0,position:"Bull"===t.position?f.Tu.BULL:f.Tu.BEAR,claimed:t.claimed,claimedAt:v(t.claimedAt),claimedBlock:v(t.claimedBlock),claimedHash:t.claimedHash,claimedBNB:t.claimedBNB?parseFloat(t.claimedBNB):0,claimedNetBNB:t.claimedNetBNB?parseFloat(t.claimedNetBNB):0,createdAt:v(t.createdAt),updatedAt:v(t.updatedAt)};return t.user&&(e.user=w(t.user)),t.round&&(e.round=y(t.round)),e},w=function(t){var e=t||{},n=e.id,r=e.createdAt,a=e.updatedAt,o=e.block,l=e.totalBets,u=e.totalBetsBull,c=e.totalBetsBear,i=e.totalBNB,s=e.totalBNBBull,d=e.totalBNBBear,B=e.totalBetsClaimed,m=e.totalBNBClaimed,f=e.winRate,p=e.averageBNB,A=e.netBNB;return{id:n,createdAt:v(r),updatedAt:v(a),block:v(o),totalBets:v(l),totalBetsBull:v(u),totalBetsBear:v(c),totalBNB:i?parseFloat(i):0,totalBNBBull:s?parseFloat(s):0,totalBNBBear:d?parseFloat(d):0,totalBetsClaimed:v(B),totalBNBClaimed:m?parseFloat(m):0,winRate:f?parseFloat(f):0,averageBNB:p?parseFloat(p):0,netBNB:A?parseFloat(A):0}},y=function(t){var e,n=t.id,r=t.epoch,a=t.failed,o=t.position,l=t.startAt,u=t.startBlock,c=t.startHash,i=t.lockAt,s=t.lockBlock,d=t.lockHash,B=t.lockPrice,m=t.lockRoundId,p=t.closeAt,A=t.closeBlock,h=t.closeHash,k=t.closePrice,N=t.closeRoundId,b=t.totalBets,C=t.totalAmount,E=t.bullBets,g=t.bullAmount,w=t.bearBets,y=t.bearAmount,F=t.bets;return{id:n,failed:a,startHash:c,lockHash:d,lockRoundId:m,closeRoundId:N,closeHash:h,position:"Bull"===o?f.Tu.BULL:"Bear"===o?f.Tu.BEAR:"House"===o?f.Tu.HOUSE:null,epoch:v(r),startAt:v(l),startBlock:v(u),lockAt:v(i),lockBlock:v(s),lockPrice:B?parseFloat(B):0,closeAt:v(p),closeBlock:v(A),closePrice:k?parseFloat(k):0,totalBets:v(b),totalAmount:C?parseFloat(C):0,bullBets:v(E),bullAmount:g?parseFloat(g):0,bearBets:v(w),bearAmount:y?parseFloat(y):0,bets:(void 0===F?[]:F).map(Z)}};function F(){var t=(0,i.Z)(["\n        query getTotalWonData {\n          market(id: 1) {\n            totalBNB\n            totalBNBTreasury\n          }\n        }\n      "]);return F=function(){return t},t}function O(){var t=(0,i.Z)(["\n        query getTotalWonData {\n          market(id: 1) {\n            totalCAKE\n            totalCAKETreasury\n          }\n        }\n      "]);return O=function(){return t},t}function T(){var t=(0,i.Z)(["\n      query getBetHistory($first: Int!, $skip: Int!, $where: Bet_filter) {\n        bets(first: $first, skip: $skip, where: $where, order: createdAt, orderDirection: desc) {\n          ","\n          round {\n            ","\n          }\n          user {\n            ","\n          }\n        }\n      }\n    "]);return T=function(){return t},t}function _(){var t=(0,i.Z)(["\n      query getUsers($first: Int!, $skip: Int!, $where: User_filter, $orderBy: User_orderBy, $orderDir: OrderDirection) {\n        users(first: $first, skip: $skip, where: $where, orderBy: $orderBy, orderDirection: $orderDir) {\n          ","\n        }\n      }\n    "]);return _=function(){return t},t}function H(){var t=(0,i.Z)(["\n      query getUser($id: ID!) {\n        user(id: $id) {\n          ","\n        }\n      }\n  "]);return H=function(){return t},t}(S=r||(r={})).WIN="win",S.LOSE="lose",S.CANCELED="canceled",S.HOUSE="house",S.LIVE="live";var S,L,q,I,K,R,$,D,P,U,J,W=function(t){return"CAKE"===t?C:Z},Y=function(t){return"CAKE"===t?E:w},G=function(t,e){var n=t.round;if(n.failed)return r.CANCELED;if(n.epoch>=e-1)return r.LIVE;if(t.round.position===f.Tu.HOUSE)return r.HOUSE;var a=n.closePrice>n.lockPrice?f.Tu.BULL:f.Tu.BEAR;return t.position===a?r.WIN:r.LOSE},V=function(t,e){switch(e){case f.dZ.COLLECTED:return t.filter(function(t){return!0===t.claimed});case f.dZ.UNCOLLECTED:return t.filter(function(t){return!t.claimed&&(t.position===t.round.position||!0===t.round.failed)});case f.dZ.ALL:default:return t}},j=function(t,e){var n=t["total".concat(e)]?parseFloat(t["total".concat(e)]):0,r=t["total".concat(e,"Treasury")]?parseFloat(t["total".concat(e,"Treasury")]):0;return Math.max(n-r,0)},x=(L=(0,a.Z)(function(){var t,e,n,r,a,o;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([(0,d.request)(B.GZ,(0,d.gql)(F())),(0,d.request)(B.fO,(0,d.gql)(O()))])];case 1:return n=(e=c.Z.apply(void 0,[t.sent(),1])[0]).market,r=e.market,a=j(n,"BNB"),o=j(r,"CAKE"),[2,{totalWonBNB:a,totalWonCAKE:o}]}})}),function(){return L.apply(this,arguments)}),z=(q=(0,a.Z)(function(){var t,e,n,r,a,o,l=arguments;return(0,s.__generator)(this,function(o){switch(o.label){case 0:var u;return t=l.length>0&&void 0!==l[0]?l[0]:{},e=l.length>1&&void 0!==l[1]?l[1]:1e3,n=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3?l[3]:void 0,a=l.length>4?l[4]:void 0,[4,(0,d.request)(r,(0,d.gql)(T(),"CAKE"===(u=a)?"\n id\n hash  \n amount\n position\n claimed\n claimedAt\n claimedHash\n claimedBlock\n claimedCAKE\n claimedNetCAKE\n createdAt\n updatedAt\n":"\n id\n hash  \n amount\n position\n claimed\n claimedAt\n claimedHash\n claimedBlock\n claimedBNB\n claimedNetBNB\n createdAt\n updatedAt\n","\n  id\n  epoch\n  position\n  failed\n  startAt\n  startBlock\n  startHash\n  lockAt\n  lockBlock\n  lockHash\n  lockPrice\n  lockRoundId\n  closeAt\n  closeBlock\n  closeHash\n  closePrice\n  closeRoundId\n  totalBets\n  totalAmount\n  bullBets\n  bullAmount\n  bearBets\n  bearAmount\n",N(a)),{first:e,skip:n,where:t})];case 1:return[2,o.sent().bets]}})}),function(){return q.apply(this,arguments)}),M=(I=(0,a.Z)(function(t,e,n){var r,a;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return r=e.map(function(e){return{address:n,name:"ledger",params:[e,t]}}),[4,(0,p.v)({abi:h,calls:r})];case 1:return[2,a.sent()]}})}),function(t,e,n){return I.apply(this,arguments)}),Q=20,X={skip:0,first:Q,orderBy:"createdAt",orderDir:"desc"},tt=function(t,e,n){if(!t){var r=(e+n)*1e3;if(Number.isFinite(r))return Date.now()>r}return!1},te=(K=(0,a.Z)(function(){var t,e,n,r,a,o,u,c,i,B,m=arguments;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e=m.length>1?m[1]:void 0,n=m.length>2?m[2]:void 0,a=(r=(0,l.Z)({},X,t)).first,o=r.skip,u=r.where,c=r.orderBy,i=r.orderDir,[4,(0,d.request)(e,(0,d.gql)(_(),N(n)),{first:a,skip:o,where:u,orderBy:c,orderDir:i})];case 1:return[2,s.sent().users]}})}),function(){return K.apply(this,arguments)}),tn=(R=(0,a.Z)(function(t,e,n){var r;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,(0,d.request)(e,(0,d.gql)(H(),N(n)),{id:t.toLowerCase()})];case 1:return[2,r.sent().user]}})}),function(t,e,n){return R.apply(this,arguments)}),tr=($=(0,a.Z)(function(t,e,n){var r,a;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return r=e.map(function(e){return{address:n,name:"claimable",params:[e,t]}}),[4,(0,p.v)({abi:h,calls:r})];case 1:return[2,a.sent().reduce(function(t,n,r){var a=e[r],i=(0,c.Z)(n,1)[0];return(0,u.Z)((0,l.Z)({},t),(0,o.Z)({},a,i))},{})]}})}),function(t,e,n){return $.apply(this,arguments)}),ta=(D=(0,a.Z)(function(t){var e,n,r,a,o,l,u,i,d,B;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return e=["currentEpoch","intervalSeconds","minBetAmount","paused"].map(function(e){return{address:t,name:e}}),[4,(0,p.v)({abi:h,calls:e})];case 1:return n=c.Z.apply(void 0,[r.sent(),4]),a=(0,c.Z)(n[0],1)[0],l=(0,c.Z)(n[1],1)[0],i=(0,c.Z)(n[2],1)[0],[2,{status:(0,c.Z)(n[3],1)[0]?f.Gw.PAUSED:f.Gw.LIVE,currentEpoch:a.toNumber(),intervalSeconds:l.toNumber(),minBetAmount:i.toString()}]}})}),function(t){return D.apply(this,arguments)}),to=(P=(0,a.Z)(function(t,e){var n,r;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return n=t.map(function(t){return{address:e,name:"rounds",params:[t]}}),[4,(0,p.v)({abi:h,calls:n})];case 1:return[2,r.sent()]}})}),function(t,e){return P.apply(this,arguments)}),tl=function(t,e){return{epoch:t,startTimestamp:e,lockTimestamp:null,closeTimestamp:null,lockPrice:null,closePrice:null,totalAmount:k._Y.toJSON(),bullAmount:k._Y.toJSON(),bearAmount:k._Y.toJSON(),rewardBaseCalAmount:k._Y.toJSON(),rewardAmount:k._Y.toJSON(),oracleCalled:!1,lockOracleId:null,closeOracleId:null}},tu=function(t){return t.reduce(function(t,e){return(0,u.Z)((0,l.Z)({},t),(0,o.Z)({},e.epoch.toString(),e))},{})},tc=function(t){return{position:0===t.position?f.Tu.BULL:f.Tu.BEAR,amount:t.amount.toJSON(),claimed:t.claimed}},ti=function(t,e,n){return e.reduce(function(e,r,a){if(!r||r.amount.eq(0))return e;var c=n[a].toString();return(0,u.Z)((0,l.Z)({},e),(0,o.Z)({},t,(0,u.Z)((0,l.Z)({},e[t]),(0,o.Z)({},c,tc(r)))))},{})},ts=function(t){var e=t.epoch,n=t.startTimestamp,r=t.lockTimestamp,a=t.closeTimestamp,o=t.lockPrice,l=t.closePrice,u=t.totalAmount,c=t.bullAmount,i=t.bearAmount,s=t.rewardBaseCalAmount,d=t.rewardAmount,B=t.oracleCalled,m=t.lockOracleId,f=t.closeOracleId;return{oracleCalled:B,epoch:e.toNumber(),startTimestamp:n.eq(0)?null:n.toNumber(),lockTimestamp:r.eq(0)?null:r.toNumber(),closeTimestamp:a.eq(0)?null:a.toNumber(),lockPrice:o.eq(0)?null:o.toJSON(),closePrice:l.eq(0)?null:l.toJSON(),totalAmount:u.toJSON(),bullAmount:c.toJSON(),bearAmount:i.toJSON(),rewardBaseCalAmount:s.toJSON(),rewardAmount:d.toJSON(),lockOracleId:m.toString(),closeOracleId:f.toString()}},td=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return r&&(null==r?void 0:r.type)==="BigNumber"?(0,u.Z)((0,l.Z)({},e),(0,o.Z)({},n,m.O$.from(r))):(0,u.Z)((0,l.Z)({},e),(0,o.Z)({},n,r))},{})},tB=(U=(0,a.Z)(function(t,e){var n,r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,A.qi)(e).getUserRoundsLength(t)];case 1:return[2,n.sent()];case 2:return n.sent(),[2,k._Y];case 3:return[2]}})}),function(t,e){return U.apply(this,arguments)}),tm=(J=(0,a.Z)(function(t){var e,n,r,a,i,d,B,m=arguments;return(0,s.__generator)(this,function(s){switch(s.label){case 0:e=m.length>1&&void 0!==m[1]?m[1]:0,n=m.length>2&&void 0!==m[2]?m[2]:b.yg,r=m.length>3?m[3]:void 0,a=(0,A.qi)(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,a.getUserRounds(t,e,n)];case 2:return d=(i=c.Z.apply(void 0,[s.sent(),2]))[0],B=i[1],[2,d.reduce(function(t,e,n){return(0,u.Z)((0,l.Z)({},t),(0,o.Z)({},e.toString(),tc(B[n])))},{})];case 3:return s.sent(),[2,null];case 4:return[2]}})}),function(t){return J.apply(this,arguments)})}}]);