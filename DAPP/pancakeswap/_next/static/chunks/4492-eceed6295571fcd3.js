"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4492],{84492:function(e,t,n){n.d(t,{Z:function(){return ef}});var r=n(47568),i=n(26042),c=n(69396),o=n(70655),s=n(85893),l=n(67294),a=n(97119),u=n(82618),d=n(34701),f=n(44147),x=n(75943),h=n(98553),p=n(62077),m=n(44391),g=n(39853),v=n(87844),Z=n(18029),j=n(16008),y=n(44305),w=n(64717),b=n(52775),C=n(2629),P=n(63850),k=n(74903),A=n(9882),I=n(49064),L=n(66594),S=n(7297),F=n(41609),E=n.n(F),D=n(91186),T=n(87379),Y=n(75472),G=n.n(Y),N=n(16393),O=n(94406),_=n(64775),M=n(32762),J=n(40696),W=n(45203),q=n(81641),K=n(12016),R=n(25896),$=n(92052),z=function(e){var t=e.item,n=e.isSelected,r=e.onClick;return(0,s.jsxs)(R.Ak,{alignItems:"center",px:"16px",py:"8px",children:[(0,s.jsx)(p.Z,{style:{flex:1},children:t.label}),(0,s.jsx)(x.Z,{ml:"24px",children:(0,s.jsx)($.Z,{name:"item-select",scale:"sm",onChange:r,checked:n,value:t.collectionAddress})})]})},U=function(e){var t=e.nftActivityFilters,n=(0,b.$G)().t,r=(0,l.useState)(!1),o=r[0],a=r[1],u=(0,l.useState)(""),d=u[0],h=u[1],m=(0,l.useState)({orderKey:"label",orderDir:"asc"}),g=m[0],v=m[1],Z=(0,A.t8)().data,j=(0,l.useRef)(null),y=(0,l.useRef)(null),w=(0,K.q)(),C=w.addActivityCollectionFilters,P=w.removeActivityCollectionFilters,k=w.removeAllActivityCollectionFilters,I=g.orderKey,L=g.orderDir,S=t.collectionFilters.length>0,F=(d&&d.length>1?Object.values(Z).filter(function(e){return -1!==e.name.toLowerCase().indexOf(d.toLowerCase())}):Object.values(Z)).map(function(e){var n=t.collectionFilters.some(function(t){return e.address.toLowerCase()===t.toLowerCase()});return(0,c.Z)((0,i.Z)({},e),{isSelected:n})}),E=function(){k()},D=function(){return a(!o)},T=function(e){h(e.target.value)},Y=function(e,t){e.target.checked?C({collection:t.address.toLowerCase()}):P({collection:t.address.toLowerCase()})},$=function(e){return function(){v(function(t){return t.orderKey!==e?{orderKey:e,orderDir:"asc"}:{orderKey:e,orderDir:"asc"===t.orderDir?"desc":"asc"}})}};return(0,l.useEffect)(function(){var e=function(e){var t=e.target;j.current&&y.current&&!y.current.contains(t)&&!j.current.contains(t)&&a(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[a,j,y]),(0,s.jsxs)(x.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,s.jsx)(f.Z,{ref:j,children:(0,s.jsx)(N.Z,{component:(0,s.jsx)(R.yR,{onClick:D,variant:S?"subtle":"light",scale:"sm",hasItem:S,children:n("Collection")}),isOpen:o,options:{placement:"bottom"},children:(0,s.jsxs)(f.Z,{maxWidth:"375px",ref:y,children:[(0,s.jsx)(R._8,{alignItems:"center",p:"16px",children:(0,s.jsx)(O.Z,{startIcon:(0,s.jsx)(_.Z,{color:"textSubtle"}),children:(0,s.jsx)(M.Z,{name:"query",placeholder:n("Search"),onChange:T,value:d})})}),(0,s.jsxs)(x.Z,{alignItems:"center",p:"16px",children:[(0,s.jsxs)(R.Lb,{onClick:$("name"),style:{flex:1},children:[(0,s.jsx)(p.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:n("Name")}),(0,s.jsxs)(f.Z,{width:"18px",children:["name"===I&&"asc"===L&&(0,s.jsx)(J.Z,{width:"18px",color:"secondary"}),"name"===I&&"desc"===L&&(0,s.jsx)(W.Z,{width:"18px",color:"secondary"})]})]}),(0,s.jsxs)(R.Lb,{onClick:$("isSelected"),children:[(0,s.jsx)(p.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:n("Filter")}),(0,s.jsxs)(f.Z,{width:"18px",children:["isSelected"===I&&"asc"===L&&(0,s.jsx)(J.Z,{width:"18px",color:"secondary"}),"isSelected"===I&&"desc"===L&&(0,s.jsx)(W.Z,{width:"18px",color:"secondary"})]})]})]}),(0,s.jsx)(f.Z,{height:"240px",overflowY:"auto",children:F.length>0?G()(F,I,L).map(function(e){var t=function(t){return Y(t,e)};return(0,s.jsx)(z,{item:{label:e.name,collectionAddress:e.address},isSelected:e.isSelected,onClick:t},e.address)}):(0,s.jsx)(x.Z,{alignItems:"center",justifyContent:"center",height:"230px",children:(0,s.jsx)(p.Z,{color:"textDisabled",textAlign:"center",children:n("No results found")})})})]})})}),S&&(0,s.jsx)(R.PZ,{variant:S?"subtle":"light",scale:"sm",onClick:E,children:(0,s.jsx)(q.Z,{color:"currentColor",width:"18px"})})]})},B=n(89663);function Q(){var e=(0,S.Z)(["\n  white-space: nowrap;\n  ","\n"]);return Q=function(){return e},e}function X(){var e=(0,S.Z)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n"]);return X=function(){return e},e}var H=(0,T.ZP)(h.Z).withConfig({componentId:"sc-34bde88d-0"})(Q(),function(e){return e.hasItem&&"  \n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    padding-right: 8px;\n  "}),V=(0,T.ZP)(B.Z).withConfig({componentId:"sc-34bde88d-1"})(X()),ee=function(e,t){switch(t){case D.YG.CANCEL:return e("Delisted");case D.YG.MODIFY:return e("Modified");case D.YG.NEW:return e("Listed");case D.YG.SELL:return e("Sold");default:return""}},et=function(e){var t=e.eventType,n=e.collectionAddress,r=e.nftActivityFilters,i=(0,b.$G)().t,c=(0,K.q)(),o=c.addActivityTypeFilters,l=c.removeActivityTypeFilters,a=r.typeFilters.some(function(e){return e===t}),u=function(){a||o({collection:n,field:t})},d=function(){l({collection:n,field:t})};return(0,s.jsxs)(x.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,s.jsx)(f.Z,{children:(0,s.jsx)(H,{onClick:u,variant:a?"subtle":"light",scale:"sm",hasItem:a,children:ee(i,t)})}),a&&(0,s.jsx)(V,{variant:a?"subtle":"light",scale:"sm",onClick:d,children:(0,s.jsx)(q.Z,{color:"currentColor",width:"18px"})})]})},en=n(99534),er=function(e){var t=e.collectionAddress,n=(0,en.Z)(e,["collectionAddress"]),r=(0,b.$G)().t,o=(0,K.q)().removeAllActivityFilters,l=function(){o(t)};return(0,s.jsx)(h.Z,(0,c.Z)((0,i.Z)({variant:"text",scale:"sm",onClick:l,style:{whiteSpace:"nowrap"}},n),{children:r("Clear")}),"clear-all")};function ei(){var e=(0,S.Z)(["\n  gap: 16px;\n\n  "," {\n    align-items: center;\n    flex-grow: 2;\n  }\n"]);return ei=function(){return e},e}function ec(){var e=(0,S.Z)(["\n  align-items: center;\n  flex: 1;\n  flex-wrap: nowrap;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n\n  "," {\n    flex-wrap: wrap;\n    overflow-x: revert;\n  }\n"]);return ec=function(){return e},e}var eo=(0,T.ZP)(x.Z).withConfig({componentId:"sc-fa27af2-0"})(ei(),function(e){return e.theme.mediaQueries.sm}),es=(0,T.ZP)(x.Z).withConfig({componentId:"sc-fa27af2-1"})(ec(),function(e){return e.theme.mediaQueries.md}),el=function(e){var t=e.address,n=e.nftActivityFilters,r=(0,b.$G)().t;return(0,s.jsxs)(eo,{justifyContent:"space-between",flexDirection:["column","column","row"],children:[(0,s.jsx)(p.Z,{textTransform:"uppercase",color:"textSubtle",fontSize:"12px",bold:!0,children:r("Filter by")}),(0,s.jsxs)(es,{children:[""===t&&(0,s.jsx)(U,{nftActivityFilters:n}),[D.YG.NEW,D.YG.CANCEL,D.YG.MODIFY,D.YG.SELL].map(function(e){return(0,s.jsx)(et,{eventType:e,collectionAddress:t,nftActivityFilters:n},e)})]}),E()(n.typeFilters)&&E()(n.collectionFilters)?null:(0,s.jsx)(er,{collectionAddress:t})]})},ea=n(86809),eu=n(35466),ed=n(66527),ef=function(e){var t=e.collection,n=(0,u.TL)(),S=(t||{address:""}).address,F=(0,A.ly)(S),E=(0,P.ZP)().theme,D=(0,b.$G)().t,T=(0,l.useState)({activity:[],currentPage:1,maxPage:1}),Y=T[0],G=T[1],N=(0,l.useState)([]),O=N[0],_=N[1],M=(0,l.useState)([]),J=M[0],W=M[1],q=(0,l.useState)(!0),K=q[0],R=q[1],$=(0,l.useState)(!1),z=$[0],U=$[1],B=(0,l.useState)(1),Q=B[0],X=B[1],H=(0,k.sP)(),V=H.lastUpdated,ee=H.setLastUpdated,et=(0,C.Hf)(),en=(0,d.Z)(),er=en.isXs,ei=en.isSm,ec=en.isMd,eo=JSON.stringify(F);return(0,l.useEffect)(function(){var e,t=(e=(0,r.Z)(function(){var e,t,n,r;return(0,o.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),R(!0),e=JSON.parse(eo),[4,(0,j.Du)(S.toLowerCase(),e,100)];case 1:return t=i.sent(),G({activity:n=(0,eu.f)(t),currentPage:1,maxPage:Math.ceil(n.length/8)||1}),R(!1),U(!0),[3,3];case 2:return r=i.sent(),console.error("Failed to fetch collection activity",r),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)});(S&&(0,a.UJ)(S)||""===S)&&t()},[n,S,eo,V]),(0,l.useEffect)(function(){var e,t=(e=(0,r.Z)(function(){var e;return(0,o.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,ed.M)(O)];case 1:return W(e.sent()),[2]}})}),function(){return e.apply(this,arguments)});O.length>0&&t()},[O]),(0,l.useEffect)(function(){_(Y.activity.slice(8*(Y.currentPage-1),8*Y.currentPage))},[Y]),(0,s.jsxs)(f.Z,{py:"32px",children:[(0,s.jsx)(y.Z,{px:[0,null,"24px"],children:(0,s.jsxs)(x.Z,{style:{gap:"16px",padding:"0 16px"},alignItems:[null,null,"center"],flexDirection:["column","column","row"],flexWrap:ec?"wrap":"nowrap",children:[(0,s.jsx)(el,{address:(null==t?void 0:t.address)||"",nftActivityFilters:F}),(0,s.jsx)(h.Z,{scale:"sm",disabled:K,onClick:function(){ee()},width:ec&&"100%",children:D("Refresh")})]})}),(0,s.jsx)(y.Z,{style:{overflowX:"auto"},children:0!==Y.activity.length||0!==J.length||0!==O.length||K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Z,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)(g.Th,{textAlign:["center",null,"left"],children:[" ",D("Item")]}),(0,s.jsxs)(g.Th,{textAlign:"right",children:[" ",D("Event")]}),er||ei?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(g.Th,{textAlign:"right",children:[" ",D("Price")]}),(0,s.jsxs)(g.Th,{textAlign:"center",children:[" ",D("From")]}),(0,s.jsxs)(g.Th,{textAlign:"center",children:[" ",D("To")]})]}),(0,s.jsxs)(g.Th,{textAlign:"center",children:[" ",D("Date")]}),er||ei?null:(0,s.jsx)(g.Th,{})]})}),(0,s.jsx)("tbody",{children:z?O.map(function(e){var t=J.find(function(t){var n;return t.tokenId===e.nft.tokenId&&t.collectionAddress.toLowerCase()===(null===(n=e.nft)||void 0===n?void 0:n.collection.id.toLowerCase())});return(0,s.jsx)(ea.Z,{activity:e,nft:t,bnbBusdPrice:et},"".concat(e.marketEvent,"#").concat(e.nft.tokenId,"#").concat(e.timestamp,"#").concat(e.tx))}):(0,s.jsx)(w.Z,{})})]}),(0,s.jsx)(x.Z,{borderTop:"1px ".concat(E.colors.cardBorder," solid"),pt:"24px",flexDirection:"column",justifyContent:"space-between",height:"100%",children:(0,s.jsxs)(I.O,{children:[(0,s.jsx)(I.E,{onClick:function(){1!==Y.currentPage&&G(function(e){return(0,c.Z)((0,i.Z)({},e),{currentPage:e.currentPage-1})})},children:(0,s.jsx)(v.Z,{color:1===Y.currentPage?"textDisabled":"primary"})}),(0,s.jsx)(p.Z,{children:D("Page %page% of %maxPage%",{page:Y.currentPage,maxPage:Y.maxPage})}),(0,s.jsx)(I.E,{onClick:(0,r.Z)(function(){var e,t,n,r;return(0,o.__generator)(this,function(o){switch(o.label){case 0:if(!(Y.currentPage!==Y.maxPage)||(G(function(e){return(0,c.Z)((0,i.Z)({},e),{currentPage:e.currentPage+1})}),!(Y.maxPage-Y.currentPage==1&&Y.activity.length===100*Q)))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),R(!0),e=JSON.parse(eo),[4,(0,j.Du)(S.toLowerCase(),e,100*(Q+1))];case 2:return t=o.sent(),n=(0,eu.f)(t),G(function(e){return(0,c.Z)((0,i.Z)({},e),{activity:n,maxPage:Math.ceil(n.length/8)||1})}),R(!1),X(function(e){return e+1}),[3,4];case 3:return r=o.sent(),console.error("Failed to fetch collection activity",r),[3,4];case 4:return[2]}})}),children:(0,s.jsx)(Z.Z,{color:Y.currentPage===Y.maxPage?"textDisabled":"primary"})})]})})]}):(0,s.jsxs)(x.Z,{p:"24px",flexDirection:"column",alignItems:"center",children:[(0,s.jsx)(L.Z,{}),(0,s.jsx)(p.Z,{pt:"8px",bold:!0,children:D("No NFT market history found")})]})})]})}},66527:function(e,t,n){n.d(t,{M:function(){return x}});var r,i=n(47568),c=n(26042),o=n(69396),s=n(10253),l=n(70655),a=n(16008),u=n(45578),d=n.n(u),f=n(30723),x=(r=(0,i.Z)(function(e){var t,n,r,i,u,x;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return t=e.some(function(e){return e.nft.collection.id.toLowerCase()===f.J.toLowerCase()}),n=d()(e.filter(function(e){return e.nft.collection.id.toLowerCase()!==f.J.toLowerCase()}).map(function(e){return{tokenId:e.nft.tokenId,collectionAddress:e.nft.collection.id}}),function(e){return"".concat(e.tokenId,"#").concat(e.collectionAddress)}),[4,Promise.all([t?(0,a.Rq)(f.J):Promise.resolve(null),(0,a._C)(n)])];case 1:return i=(r=s.Z.apply(void 0,[l.sent(),2]))[0],u=r[1],x=i?e.filter(function(e){return e.nft.collection.id.toLowerCase()===f.J.toLowerCase()}).map(function(e){var t=i.data[e.nft.otherId].collection.name;return(0,o.Z)((0,c.Z)({},i.data[e.nft.otherId]),{tokenId:e.nft.tokenId,attributes:[{traitType:"bunnyId",value:e.nft.otherId}],collectionAddress:e.nft.collection.id,collectionName:t})}):[],[2,u.concat(x)]}})}),function(e){return r.apply(this,arguments)})},35466:function(e,t,n){n.d(t,{f:function(){return s}});var r=n(36305),i=n(91186),c=n(75472),o=n.n(c),s=function(e){var t,n,c=e.askOrders,s=e.transactions,l=function(e){switch(e){case i.cP.CANCEL:return i.YG.CANCEL;case i.cP.MODIFY:return i.YG.MODIFY;case i.cP.NEW:return i.YG.NEW;default:return i.YG.MODIFY}},a=(0,r.Z)((t=void 0===c?[]:c).map(function(e){var t,n=l(e.orderType),r=e.askPrice,i=e.timestamp,c=e.nft;return{marketEvent:n,price:r,timestamp:i,nft:c,tx:e.id,seller:null==e?void 0:e.seller.id}})).concat((0,r.Z)((n=void 0===s?[]:s).map(function(e){var t,n=i.YG.SELL,r=e.timestamp,c=e.nft,o=e.askPrice,s=e.id;return{marketEvent:n,price:o,timestamp:r,nft:c,tx:s,buyer:e.buyer.id,seller:e.seller.id}})));return a.length>0?o()(a,function(e){return parseInt(e.timestamp,10)},"desc"):[]}},66594:function(e,t,n){var r=n(7297),i=n(87379);function c(){var e=(0,r.Z)(["\n  background: url('/images/nfts/no-profile-md.png');\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n  position: relative;\n  width: 96px;\n  height: 96px;\n\n  & > img {\n    border-radius: 50%;\n  }\n"]);return c=function(){return e},e}var o=i.ZP.div.withConfig({componentId:"sc-9689af5c-0"})(c());t.Z=o}}]);